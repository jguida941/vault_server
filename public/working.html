<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>🔥 THE VAULT 🔒</title>
    <style>
        /* ===== THEME SYSTEM ===== */
        :root {
            /* Default Theme: Cyberpunk Matrix */
            --bg-primary: #000000;
            --bg-secondary: #0d0d0d;
            --bg-tertiary: #1a1a1a;
            --text-primary: #00ff41;
            --text-secondary: #00cc33;
            --text-tertiary: #888888;
            --accent-primary: #00ff41;
            --accent-secondary: #00cc33;
            --accent-tertiary: #006600;
            --border-primary: #00ff41;
            --border-secondary: #333333;
            --shadow-primary: rgba(0, 255, 65, 0.3);
            --shadow-secondary: rgba(0, 255, 65, 0.1);
            --gradient-1: #00ff41;
            --gradient-2: #00cc33;
            --gradient-3: #009900;
            --overlay: rgba(0, 0, 0, 0.8);
            --hover-transform: translateY(-4px);
            --transition-speed: 0.3s;
            --animation-name: matrix-rain;
            --font-primary: 'Courier New', monospace;
            --font-secondary: monospace;
            --font-weight: 400;
            --letter-spacing: 0.05em;
            --text-transform: none;
            --line-height: 1.6;
            --border-radius: 4px;
            --button-bg: #00ff41;
            --button-text: #000000;
            --button-hover-bg: #00cc33;
            --button-border: none;
            --button-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
        }

        /* Theme 2: Synthwave Sunset */
        [data-theme="synthwave"] {
            --bg-primary: #1a0033;
            --bg-secondary: #2d1b69;
            --bg-tertiary: #3d2585;
            --text-primary: #ff0080;
            --text-secondary: #00ffff;
            --text-tertiary: #ff6b35;
            --accent-primary: #ff0080;
            --accent-secondary: #00ffff;
            --accent-tertiary: #ffff00;
            --border-primary: #ff0080;
            --border-secondary: #00ffff;
            --shadow-primary: rgba(255, 0, 128, 0.5);
            --shadow-secondary: rgba(0, 255, 255, 0.3);
            --gradient-1: #ff0080;
            --gradient-2: #00ffff;
            --gradient-3: #ff6b35;
            --overlay: rgba(26, 0, 51, 0.8);
            --hover-transform: translateY(-6px) scale(1.02);
            --transition-speed: 0.4s;
            --animation-name: neon-pulse;
            --font-primary: 'Orbitron', monospace;
            --font-secondary: 'Audiowide', monospace;
            --font-weight: 700;
            --letter-spacing: 0.1em;
            --text-transform: uppercase;
            --line-height: 1.4;
            --border-radius: var(--border-radius, 8px);
            --button-bg: linear-gradient(45deg, #ff0080, #00ffff);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(45deg, #ff0080, #ffff00);
            --button-border: 2px solid #ff0080;
            --button-shadow: 0 0 20px rgba(255, 0, 128, 0.8), inset 0 0 10px rgba(0, 255, 255, 0.3);
        }

        /* Theme 3: Lofi Study Room */
        [data-theme="lofi"] {
            --bg-primary: #f5e6d3;
            --bg-secondary: #faf8f3;
            --bg-tertiary: #e8dcc6;
            --text-primary: #5d4e37;
            --text-secondary: #8b6f47;
            --text-tertiary: #7c6654;
            --accent-primary: #87a96b;
            --accent-secondary: #d4a574;
            --accent-tertiary: #b08d57;
            --border-primary: #d4a574;
            --border-secondary: #e8dcc6;
            --shadow-primary: rgba(93, 78, 55, 0.2);
            --shadow-secondary: rgba(139, 111, 71, 0.1);
            --gradient-1: #f5e6d3;
            --gradient-2: #e8dcc6;
            --gradient-3: #d4a574;
            --overlay: rgba(245, 230, 211, 0.9);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.5s;
            --animation-name: paper-flutter;
            --font-primary: 'Indie Flower', sans-serif;
            --font-secondary: 'Patrick Hand', sans-serif;
            --font-weight: 300;
            --letter-spacing: -0.02em;
            --text-transform: none;
            --line-height: 1.8;
            --border-radius: 16px;
            --button-bg: #8b6f47;
            --button-text: #f5e6d3;
            --button-hover-bg: #6b5537;
            --button-border: none;
            --button-shadow: 0 2px 8px rgba(139, 111, 71, 0.3);
        }

        /* Theme 4: Glassmorphism Pro */
        [data-theme="glass"] {
            --bg-primary: rgba(15, 15, 25, 0.95);
            --bg-secondary: rgba(25, 25, 40, 0.85);
            --bg-tertiary: rgba(35, 35, 55, 0.75);
            --text-primary: #ffffff;
            --text-secondary: #e0e0e0;
            --text-tertiary: #b0b0b0;
            --accent-primary: #b3e5fc;
            --accent-secondary: #81d4fa;
            --accent-tertiary: #4fc3f7;
            --border-primary: rgba(255, 255, 255, 0.2);
            --border-secondary: rgba(255, 255, 255, 0.1);
            --shadow-primary: rgba(0, 0, 0, 0.1);
            --shadow-secondary: rgba(255, 255, 255, 0.1);
            --gradient-1: rgba(255, 255, 255, 0.2);
            --gradient-2: rgba(255, 255, 255, 0.1);
            --gradient-3: rgba(255, 255, 255, 0.05);
            --overlay: rgba(255, 255, 255, 0.1);
            --hover-transform: translateY(-4px) translateZ(20px);
            --transition-speed: 0.3s;
            --animation-name: glass-shimmer;
            --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-secondary: 'Helvetica Neue', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.02em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 12px;
            --button-bg: rgba(255, 255, 255, 0.1);
            --button-text: #ffffff;
            --button-hover-bg: rgba(255, 255, 255, 0.2);
            --button-border: 1px solid rgba(255, 255, 255, 0.3);
            --button-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        /* Theme 5: Deep Ocean Abyss */
        [data-theme="ocean"] {
            --bg-primary: #001f3f;
            --bg-secondary: #003366;
            --bg-tertiary: #004080;
            --text-primary: #00ffff;
            --text-secondary: #40e0d0;
            --text-tertiary: #7fffd4;
            --accent-primary: #00ffff;
            --accent-secondary: #4a148c;
            --accent-tertiary: #7b68ee;
            --border-primary: #00ffff;
            --border-secondary: #004080;
            --shadow-primary: rgba(0, 255, 255, 0.4);
            --shadow-secondary: rgba(74, 20, 140, 0.3);
            --gradient-1: #001f3f;
            --gradient-2: #00ffff;
            --gradient-3: #4a148c;
            --overlay: rgba(0, 31, 63, 0.85);
            --hover-transform: translateY(-4px) scale(1.01);
            --transition-speed: 0.6s;
            --animation-name: ocean-wave;
            --font-primary: 'Comfortaa', sans-serif;
            --font-secondary: 'Quicksand', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0.05em;
            --text-transform: none;
            --line-height: 1.7;
            --border-radius: 20px;
            --button-bg: #00ffff;
            --button-text: #001f3f;
            --button-hover-bg: #00cccc;
            --button-border: none;
            --button-shadow: 0 4px 15px rgba(0, 255, 255, 0.4);
        }

        /* Theme 6: Cosmic Nebula */
        [data-theme="cosmic"] {
            --bg-primary: #000014;
            --bg-secondary: #0a0a2e;
            --bg-tertiary: #161650;
            --text-primary: #ffffff;
            --text-secondary: #ff1493;
            --text-tertiary: #dda0dd;
            --accent-primary: #6a0dad;
            --accent-secondary: #ff1493;
            --accent-tertiary: #00bfff;
            --border-primary: #6a0dad;
            --border-secondary: #ff1493;
            --shadow-primary: rgba(106, 13, 173, 0.5);
            --shadow-secondary: rgba(255, 20, 147, 0.3);
            --gradient-1: #6a0dad;
            --gradient-2: #ff1493;
            --gradient-3: #00bfff;
            --overlay: rgba(0, 0, 20, 0.8);
            --hover-transform: translateY(-5px) rotate(1deg);
            --transition-speed: 0.4s;
            --animation-name: nebula-swirl;
            --font-primary: 'Space Mono', monospace;
            --font-secondary: 'Exo 2', sans-serif;
            --font-weight: 600;
            --letter-spacing: 0.15em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 6px;
            --button-bg: linear-gradient(135deg, #6a0dad, #ff1493);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(135deg, #8b00ff, #ff69b4);
            --button-border: none;
            --button-shadow: 0 0 30px rgba(106, 13, 173, 0.6);
        }

        /* Theme 7: Steampunk Brass */
        [data-theme="steampunk"] {
            --bg-primary: #3d2817;
            --bg-secondary: #5d3a1a;
            --bg-tertiary: #704214;
            --text-primary: #f4e4c1;
            --text-secondary: #d4af37;
            --text-tertiary: #b87333;
            --accent-primary: #b87333;
            --accent-secondary: #cd7f32;
            --accent-tertiary: #d4af37;
            --border-primary: #b87333;
            --border-secondary: #8b6914;
            --shadow-primary: rgba(184, 115, 51, 0.4);
            --shadow-secondary: rgba(212, 175, 55, 0.2);
            --gradient-1: #b87333;
            --gradient-2: #d4af37;
            --gradient-3: #f4e4c1;
            --overlay: rgba(61, 40, 23, 0.85);
            --hover-transform: translateY(-3px) rotate(-1deg);
            --transition-speed: 0.3s;
            --animation-name: gear-rotation;
            --font-primary: 'Cinzel', serif;
            --font-secondary: 'Playfair Display', serif;
            --font-weight: 900;
            --letter-spacing: 0.08em;
            --text-transform: capitalize;
            --line-height: 1.3;
            --border-radius: 4px;
            --button-bg: #b87333;
            --button-text: #3d2817;
            --button-hover-bg: #d4af37;
            --button-border: 3px solid #3d2817;
            --button-shadow: inset 0 2px 4px rgba(0,0,0,0.5), 0 1px 2px rgba(255,255,255,0.3);
        }

        /* Theme 8: Arctic Aurora */
        [data-theme="arctic"] {
            --bg-primary: #e6f3ff;
            --bg-secondary: #cce7ff;
            --bg-tertiary: #b3daff;
            --text-primary: #004080;
            --text-secondary: #0066cc;
            --text-tertiary: #4682b4;
            --accent-primary: #7fff00;
            --accent-secondary: #4dd0e1;
            --accent-tertiary: #00bcd4;
            --border-primary: #4dd0e1;
            --border-secondary: #b3daff;
            --shadow-primary: rgba(77, 208, 225, 0.3);
            --shadow-secondary: rgba(127, 255, 0, 0.2);
            --gradient-1: #7fff00;
            --gradient-2: #4dd0e1;
            --gradient-3: #b3daff;
            --overlay: rgba(230, 243, 255, 0.9);
            --hover-transform: translateY(-4px) scale(1.02);
            --transition-speed: 0.4s;
            --animation-name: aurora-dance;
            --font-primary: 'Raleway', sans-serif;
            --font-secondary: 'Montserrat', sans-serif;
            --font-weight: 300;
            --letter-spacing: 0.1em;
            --text-transform: none;
            --line-height: 1.9;
            --border-radius: 24px;
            --button-bg: linear-gradient(180deg, #e6f3ff, #b3e0ff);
            --button-text: #0066cc;
            --button-hover-bg: linear-gradient(180deg, #b3e0ff, #66c2ff);
            --button-border: 1px solid #4dd0e1;
            --button-shadow: 0 4px 20px rgba(77, 208, 225, 0.3);
        }

        /* Theme 9: Tokyo Neon Night */
        [data-theme="tokyo"] {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-tertiary: #1a1a1a;
            --text-primary: #ff0099;
            --text-secondary: #ffff00;
            --text-tertiary: #00ffff;
            --accent-primary: #ff0099;
            --accent-secondary: #00ffff;
            --accent-tertiary: #ffff00;
            --border-primary: #ff0099;
            --border-secondary: #00ffff;
            --shadow-primary: rgba(255, 0, 153, 0.6);
            --shadow-secondary: rgba(0, 255, 255, 0.4);
            --gradient-1: #ff0099;
            --gradient-2: #ffff00;
            --gradient-3: #00ffff;
            --overlay: rgba(0, 0, 0, 0.85);
            --hover-transform: translateY(-5px) skew(-2deg);
            --transition-speed: 0.2s;
            --animation-name: neon-flicker;
            --font-primary: 'Noto Sans JP', sans-serif;
            --font-secondary: 'M PLUS 1p', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.05em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 0px;
            --button-bg: #ff0099;
            --button-text: #000000;
            --button-hover-bg: #ff33aa;
            --button-border: none;
            --button-shadow: 0 0 15px rgba(255, 0, 153, 0.8);
        }

        /* Theme 10: Desert Sandstorm */
        [data-theme="desert"] {
            --bg-primary: #f4a460;
            --bg-secondary: #deb887;
            --bg-tertiary: #d2691e;
            --text-primary: #8b4513;
            --text-secondary: #a0522d;
            --text-tertiary: #654321;
            --accent-primary: #ff8c00;
            --accent-secondary: #1e90ff;
            --accent-tertiary: #ff6347;
            --border-primary: #cc5500;
            --border-secondary: #d2691e;
            --shadow-primary: rgba(204, 85, 0, 0.3);
            --shadow-secondary: rgba(30, 144, 255, 0.2);
            --gradient-1: #ff8c00;
            --gradient-2: #ffa500;
            --gradient-3: #ffb347;
            --overlay: rgba(244, 164, 96, 0.8);
            --hover-transform: translateY(-3px);
            --transition-speed: 0.5s;
            --animation-name: sand-drift;
            --font-primary: 'Amiri', serif;
            --font-secondary: 'Cairo', sans-serif;
            --font-weight: 600;
            --letter-spacing: 0.03em;
            --text-transform: none;
            --line-height: 1.6;
            --border-radius: var(--border-radius, 8px);
            --button-bg: #ff8c00;
            --button-text: #3d2817;
            --button-hover-bg: #ffa500;
            --button-border: 2px solid #8b4513;
            --button-shadow: 0 3px 10px rgba(139, 69, 19, 0.4);
        }

        /* Theme 11: Enchanted Forest */
        [data-theme="forest"] {
            --bg-primary: #013220;
            --bg-secondary: #1a4d2e;
            --bg-tertiary: #2d5f3f;
            --text-primary: #90ee90;
            --text-secondary: #8fbc8f;
            --text-tertiary: #adff2f;
            --accent-primary: #ffd700;
            --accent-secondary: #dc143c;
            --accent-tertiary: #8a9a5b;
            --border-primary: #8a9a5b;
            --border-secondary: #556b2f;
            --shadow-primary: rgba(255, 215, 0, 0.3);
            --shadow-secondary: rgba(138, 154, 91, 0.2);
            --gradient-1: #013220;
            --gradient-2: #8a9a5b;
            --gradient-3: #ffd700;
            --overlay: rgba(1, 50, 32, 0.85);
            --hover-transform: translateY(-4px) rotate(2deg);
            --transition-speed: 0.6s;
            --animation-name: firefly-dance;
            --font-primary: 'Pangolin', sans-serif;
            --font-secondary: 'Kalam', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0em;
            --text-transform: none;
            --line-height: 1.75;
            --border-radius: 12px;
            --button-bg: #228b22;
            --button-text: #f0f8ff;
            --button-hover-bg: #32cd32;
            --button-border: none;
            --button-shadow: 0 4px 12px rgba(34, 139, 34, 0.3);
        }

        /* Theme 12: Brutalist Concrete */
        [data-theme="brutalist"] {
            --bg-primary: #808080;
            --bg-secondary: #696969;
            --bg-tertiary: #a9a9a9;
            --text-primary: #000000;
            --text-secondary: #ffffff;
            --text-tertiary: #333333;
            --accent-primary: #ff4500;
            --accent-secondary: #1e3a8a;
            --accent-tertiary: #ffd700;
            --border-primary: #000000;
            --border-secondary: #ff4500;
            --shadow-primary: rgba(0, 0, 0, 0.5);
            --shadow-secondary: rgba(255, 69, 0, 0.3);
            --gradient-1: #808080;
            --gradient-2: #696969;
            --gradient-3: #a9a9a9;
            --overlay: rgba(128, 128, 128, 0.9);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.1s;
            --animation-name: concrete-shift;
            --font-primary: 'Bebas Neue', sans-serif;
            --font-secondary: 'Oswald', sans-serif;
            --font-weight: 800;
            --letter-spacing: -0.03em;
            --text-transform: uppercase;
            --line-height: 1.2;
            --border-radius: 0px;
            --button-bg: #000000;
            --button-text: #ffffff;
            --button-hover-bg: #333333;
            --button-border: 4px solid #000000;
            --button-shadow: 8px 8px 0px #000000;
        }

        /* Theme 13: Vaporwave Plaza */
        [data-theme="vaporwave"] {
            --bg-primary: #ff69b4;
            --bg-secondary: #ff1493;
            --bg-tertiary: #ff82ab;
            --text-primary: #ffffff;
            --text-secondary: #40e0d0;
            --text-tertiary: #9370db;
            --accent-primary: #40e0d0;
            --accent-secondary: #9370db;
            --accent-tertiary: #ffffff;
            --border-primary: #40e0d0;
            --border-secondary: #9370db;
            --shadow-primary: rgba(64, 224, 208, 0.5);
            --shadow-secondary: rgba(147, 112, 219, 0.3);
            --gradient-1: #ff69b4;
            --gradient-2: #40e0d0;
            --gradient-3: #9370db;
            --overlay: rgba(255, 105, 180, 0.7);
            --hover-transform: translateY(-4px) skew(2deg);
            --transition-speed: 0.4s;
            --animation-name: vaporwave-glitch;
            --font-primary: 'VT323', monospace;
            --font-secondary: 'Press Start 2P', sans-serif;
            --font-weight: 700;
            --letter-spacing: 0.2em;
            --text-transform: uppercase;
            --line-height: 1.3;
            --border-radius: 16px;
            --button-bg: linear-gradient(90deg, #ff69b4, #40e0d0, #ff69b4);
            --button-text: #000000;
            --button-hover-bg: linear-gradient(90deg, #40e0d0, #ff69b4, #40e0d0);
            --button-border: 2px solid #ff69b4;
            --button-shadow: 0 0 20px rgba(255, 105, 180, 0.6);
        }

        /* Theme 14: Monochrome Ink */
        [data-theme="monochrome"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f0f0f0;
            --bg-tertiary: #e0e0e0;
            --text-primary: #000000;
            --text-secondary: #333333;
            --text-tertiary: #666666;
            --accent-primary: #000000;
            --accent-secondary: #808080;
            --accent-tertiary: #404040;
            --border-primary: #000000;
            --border-secondary: #808080;
            --shadow-primary: rgba(0, 0, 0, 0.3);
            --shadow-secondary: rgba(0, 0, 0, 0.1);
            --gradient-1: #000000;
            --gradient-2: #808080;
            --gradient-3: #ffffff;
            --overlay: rgba(255, 255, 255, 0.9);
            --hover-transform: translateY(-3px);
            --transition-speed: 0.2s;
            --animation-name: ink-bleed;
            --font-primary: 'Courier Prime', monospace;
            --font-secondary: 'Special Elite', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.05em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 2px;
            --button-bg: #000000;
            --button-text: #ffffff;
            --button-hover-bg: #333333;
            --button-border: 2px solid #ffffff;
            --button-shadow: none;
        }

        /* Theme 15: Sunset Gradient */
        [data-theme="sunset"] {
            --bg-primary: #ff7f50;
            --bg-secondary: #ff6347;
            --bg-tertiary: #ff4500;
            --text-primary: #ffffff;
            --text-secondary: #fff8dc;
            --text-tertiary: #fffacd;
            --accent-primary: #ff1493;
            --accent-secondary: #8a2be2;
            --accent-tertiary: #191970;
            --border-primary: #ff1493;
            --border-secondary: #8a2be2;
            --shadow-primary: rgba(255, 20, 147, 0.4);
            --shadow-secondary: rgba(138, 43, 226, 0.3);
            --gradient-1: #ff7f50;
            --gradient-2: #ff1493;
            --gradient-3: #8a2be2;
            --overlay: rgba(255, 127, 80, 0.8);
            --hover-transform: translateY(-4px) scale(1.02);
            --transition-speed: 0.5s;
            --animation-name: sunset-glow;
            --font-primary: 'Dancing Script', sans-serif;
            --font-secondary: 'Pacifico', sans-serif;
            --font-weight: 300;
            --letter-spacing: 0.02em;
            --text-transform: none;
            --line-height: 1.7;
            --border-radius: 50px;
            --button-bg: linear-gradient(45deg, #ff7f50, #ff1493);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(45deg, #ff6347, #ff69b4);
            --button-border: none;
            --button-shadow: 0 5px 15px rgba(255, 127, 80, 0.4);
        }

        /* Theme 16: Quantum Void */
        [data-theme="quantum"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-tertiary: #1e1e1e;
            --text-primary: #0066cc;
            --text-secondary: #6600ff;
            --text-tertiary: #ffffff;
            --accent-primary: #0066cc;
            --accent-secondary: #6600ff;
            --accent-tertiary: #00ffcc;
            --border-primary: #0066cc;
            --border-secondary: #6600ff;
            --shadow-primary: rgba(0, 102, 204, 0.5);
            --shadow-secondary: rgba(102, 0, 255, 0.3);
            --gradient-1: #0066cc;
            --gradient-2: #6600ff;
            --gradient-3: #00ffcc;
            --overlay: rgba(10, 10, 10, 0.9);
            --hover-transform: translateY(-5px) rotateX(10deg);
            --transition-speed: 0.3s;
            --animation-name: quantum-flux;
            --font-primary: 'Share Tech Mono', monospace;
            --font-secondary: 'Electrolize', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0.1em;
            --text-transform: none;
            --line-height: 1.4;
            --border-radius: 6px;
            --button-bg: #0066cc;
            --button-text: #ffffff;
            --button-hover-bg: #0052a3;
            --button-border: 1px solid #6600ff;
            --button-shadow: 0 0 10px rgba(0, 102, 204, 0.6);
        }

        /* Theme 17: Tropical Paradise */
        [data-theme="tropical"] {
            --bg-primary: #006994;
            --bg-secondary: #0088cc;
            --bg-tertiary: #00a8e8;
            --text-primary: #ffffff;
            --text-secondary: #f5deb3;
            --text-tertiary: #ffeaa7;
            --accent-primary: #228b22;
            --accent-secondary: #ff7f50;
            --accent-tertiary: #ffd700;
            --border-primary: #228b22;
            --border-secondary: #ff7f50;
            --shadow-primary: rgba(34, 139, 34, 0.4);
            --shadow-secondary: rgba(255, 127, 80, 0.3);
            --gradient-1: #006994;
            --gradient-2: #228b22;
            --gradient-3: #ff7f50;
            --overlay: rgba(0, 105, 148, 0.8);
            --hover-transform: translateY(-4px) rotate(-2deg);
            --transition-speed: 0.4s;
            --animation-name: palm-sway;
            --font-primary: 'Lobster', sans-serif;
            --font-secondary: 'Comfortaa', sans-serif;
            --font-weight: 500;
            --letter-spacing: -0.01em;
            --text-transform: none;
            --line-height: 1.8;
            --border-radius: 20px;
            --button-bg: #ff7f50;
            --button-text: #006994;
            --button-hover-bg: #ff6347;
            --button-border: none;
            --button-shadow: 0 3px 10px rgba(255, 127, 80, 0.3);
        }

        /* Theme 18: Gothic Cathedral */
        [data-theme="gothic"] {
            --bg-primary: #1c1c1c;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #36454f;
            --text-primary: #ffd700;
            --text-secondary: #c0c0c0;
            --text-tertiary: #8b0000;
            --accent-primary: #8b0000;
            --accent-secondary: #ffd700;
            --accent-tertiary: #4b0082;
            --border-primary: #ffd700;
            --border-secondary: #8b0000;
            --shadow-primary: rgba(255, 215, 0, 0.3);
            --shadow-secondary: rgba(139, 0, 0, 0.4);
            --gradient-1: #1c1c1c;
            --gradient-2: #8b0000;
            --gradient-3: #ffd700;
            --overlay: rgba(28, 28, 28, 0.9);
            --hover-transform: translateY(-3px);
            --transition-speed: 0.6s;
            --animation-name: candle-flicker;
            --font-primary: 'UnifrakturMaguntia', sans-serif;
            --font-secondary: 'Cinzel Decorative', sans-serif;
            --font-weight: 700;
            --letter-spacing: 0.05em;
            --text-transform: capitalize;
            --line-height: 1.4;
            --border-radius: 0px;
            --button-bg: #8b0000;
            --button-text: #ffd700;
            --button-hover-bg: #a52a2a;
            --button-border: 2px solid #ffd700;
            --button-shadow: inset 0 0 10px rgba(0,0,0,0.5);
        }

        /* Theme 19: Holographic Future */
        [data-theme="holographic"] {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-tertiary: #1a1a1a;
            --text-primary: #00d4ff;
            --text-secondary: #ff00ff;
            --text-tertiary: #c0c0c0;
            --accent-primary: #00d4ff;
            --accent-secondary: #ff00ff;
            --accent-tertiary: #00ff00;
            --border-primary: #00d4ff;
            --border-secondary: #ff00ff;
            --shadow-primary: rgba(0, 212, 255, 0.6);
            --shadow-secondary: rgba(255, 0, 255, 0.4);
            --gradient-1: #00d4ff;
            --gradient-2: #ff00ff;
            --gradient-3: #00ff00;
            --overlay: rgba(0, 0, 0, 0.7);
            --hover-transform: translateY(-5px) perspective(1000px) rotateY(10deg);
            --transition-speed: 0.3s;
            --animation-name: hologram-scan;
            --font-primary: 'Rajdhani', sans-serif;
            --font-secondary: 'Orbitron', sans-serif;
            --font-weight: 600;
            --letter-spacing: 0.12em;
            --text-transform: uppercase;
            --line-height: 1.5;
            --border-radius: 10px;
            --button-bg: linear-gradient(45deg, #00d4ff, #ff00ff, #00d4ff);
            --button-text: #000000;
            --button-hover-bg: linear-gradient(45deg, #ff00ff, #00d4ff, #ff00ff);
            --button-border: none;
            --button-shadow: 0 0 20px rgba(0, 212, 255, 0.6), 0 0 40px rgba(255, 0, 255, 0.4);
        }

        /* Theme 20: Zen Garden */
        [data-theme="zen"] {
            --bg-primary: #faf0e6;
            --bg-secondary: #f5f5dc;
            --bg-tertiary: #ede5d0;
            --text-primary: #1a2e1a;
            --text-secondary: #3d4f3d;
            --text-tertiary: #556b2f;
            --accent-primary: #6b8e23;
            --accent-secondary: #87ceeb;
            --accent-tertiary: #dda0dd;
            --border-primary: #918e85;
            --border-secondary: #6b8e23;
            --shadow-primary: rgba(107, 142, 35, 0.2);
            --shadow-secondary: rgba(135, 206, 235, 0.15);
            --gradient-1: #faf0e6;
            --gradient-2: #87ceeb;
            --gradient-3: #6b8e23;
            --overlay: rgba(250, 240, 230, 0.9);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.7s;
            --animation-name: water-ripple;
            --font-primary: 'Noto Serif JP', serif;
            --font-secondary: 'Zen Kurenaido', sans-serif;
            --font-weight: 300;
            --letter-spacing: 0.08em;
            --text-transform: none;
            --line-height: 2.0;
            --border-radius: 30px;
            --button-bg: #87ceeb;
            --button-text: #1a2e1a;
            --button-hover-bg: #6bb6d6;
            --button-border: none;
            --button-shadow: 0 2px 8px rgba(135, 206, 235, 0.2);
        }

        /* Theme 21: Biomorphic Flow */
        [data-theme="biomorphic"] {
            --bg-primary: #fdf5e6;
            --bg-secondary: #f5ede0;
            --bg-tertiary: #ffe5d9;
            --text-primary: #2d4a3d;
            --text-secondary: #4a6b5a;
            --text-tertiary: #6b8e7c;
            --accent-primary: #b8e6d0;
            --accent-secondary: #ff9a8b;
            --accent-tertiary: #87a96b;
            --border-primary: #b8e6d0;
            --border-secondary: #ff9a8b;
            --shadow-primary: rgba(184, 230, 208, 0.4);
            --shadow-secondary: rgba(255, 154, 139, 0.3);
            --gradient-1: #b8e6d0;
            --gradient-2: #ff9a8b;
            --gradient-3: #fdf5e6;
            --overlay: rgba(253, 245, 230, 0.85);
            --hover-transform: translateY(-4px) scale(1.03);
            --transition-speed: 0.8s;
            --animation-name: organic-morph;
            --font-primary: 'Quicksand', sans-serif;
            --font-secondary: 'Comfortaa', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0.01em;
            --text-transform: none;
            --line-height: 1.6;
            --border-radius: 40px;
            --button-bg: linear-gradient(135deg, #b8e6d0, #ff9a8b);
            --button-text: #333333;
            --button-hover-bg: linear-gradient(135deg, #ff9a8b, #b8e6d0);
            --button-border: none;
            --button-shadow: 0 5px 20px rgba(184, 230, 208, 0.3);
        }

        /* Theme 22: Art Deco Metropolis */
        [data-theme="artdeco"] {
            --bg-primary: #000000;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2d2d2d;
            --text-primary: #d4af37;
            --text-secondary: #fffff0;
            --text-tertiary: #c0c0c0;
            --accent-primary: #d4af37;
            --accent-secondary: #004225;
            --accent-tertiary: #fffff0;
            --border-primary: #d4af37;
            --border-secondary: #004225;
            --shadow-primary: rgba(212, 175, 55, 0.5);
            --shadow-secondary: rgba(0, 66, 37, 0.3);
            --gradient-1: #d4af37;
            --gradient-2: #004225;
            --gradient-3: #000000;
            --overlay: rgba(0, 0, 0, 0.8);
            --hover-transform: translateY(-3px) skew(-1deg);
            --transition-speed: 0.4s;
            --animation-name: deco-sunburst;
            --font-primary: 'Poiret One', sans-serif;
            --font-secondary: 'Josefin Sans', sans-serif;
            --font-weight: 700;
            --letter-spacing: 0.15em;
            --text-transform: uppercase;
            --line-height: 1.3;
            --border-radius: 0px;
            --button-bg: #d4af37;
            --button-text: #000000;
            --button-hover-bg: #ffd700;
            --button-border: 3px solid #000000;
            --button-shadow: 0 0 0 1px #d4af37, 0 0 0 3px #000000;
        }

        /* Theme 23: Scandinavian Frost */
        [data-theme="scandinavian"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5dc;
            --bg-tertiary: #e6f3ff;
            --text-primary: #2c3a44;
            --text-secondary: #445566;
            --text-tertiary: #667788;
            --accent-primary: #4a90e2;
            --accent-secondary: #2c3a44;
            --accent-tertiary: #d0e0f0;
            --border-primary: #e6f3ff;
            --border-secondary: #d0e0f0;
            --shadow-primary: rgba(230, 243, 255, 0.3);
            --shadow-secondary: rgba(54, 69, 79, 0.1);
            --gradient-1: #ffffff;
            --gradient-2: #e6f3ff;
            --gradient-3: #f5f5dc;
            --overlay: rgba(255, 255, 255, 0.95);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.5s;
            --animation-name: frost-crystal;
            --font-primary: 'Jost', sans-serif;
            --font-secondary: 'Work Sans', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0.02em;
            --text-transform: none;
            --line-height: 1.8;
            --border-radius: var(--border-radius, 8px);
            --button-bg: #4a90e2;
            --button-text: #ffffff;
            --button-hover-bg: #357abd;
            --button-border: none;
            --button-shadow: 0 2px 4px rgba(74, 144, 226, 0.2);
        }

        /* Theme 24: Bioluminescent Lab */
        [data-theme="biolab"] {
            --bg-primary: #fafafa;
            --bg-secondary: #f0f0f0;
            --bg-tertiary: #e0e0e0;
            --text-primary: #000080;
            --text-secondary: #00a500;
            --text-tertiary: #404040;
            --accent-primary: #00c800;
            --accent-secondary: #ff9500;
            --accent-tertiary: #000080;
            --border-primary: #39ff14;
            --border-secondary: #000080;
            --shadow-primary: rgba(57, 255, 20, 0.4);
            --shadow-secondary: rgba(255, 191, 0, 0.2);
            --gradient-1: #39ff14;
            --gradient-2: #ffbf00;
            --gradient-3: #000080;
            --overlay: rgba(250, 250, 250, 0.9);
            --hover-transform: translateY(-3px) rotateX(5deg);
            --transition-speed: 0.3s;
            --animation-name: dna-helix;
            --font-primary: 'Roboto Mono', monospace;
            --font-secondary: 'Source Code Pro', monospace;
            --font-weight: 500;
            --letter-spacing: 0.03em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 4px;
            --button-bg: #00c800;
            --button-text: #000080;
            --button-hover-bg: #00ff00;
            --button-border: 2px solid #000080;
            --button-shadow: 0 0 15px rgba(0, 200, 0, 0.5);
        }

        /* Theme 25: Moroccan Nights */
        [data-theme="moroccan"] {
            --bg-primary: #3f51b5;
            --bg-secondary: #5c6bc0;
            --bg-tertiary: #7986cb;
            --text-primary: #ffd700;
            --text-secondary: #30d5c8;
            --text-tertiary: #c2b280;
            --accent-primary: #cc5500;
            --accent-secondary: #30d5c8;
            --accent-tertiary: #ffd700;
            --border-primary: #cc5500;
            --border-secondary: #c2b280;
            --shadow-primary: rgba(204, 85, 0, 0.5);
            --shadow-secondary: rgba(48, 213, 200, 0.3);
            --gradient-1: #3f51b5;
            --gradient-2: #cc5500;
            --gradient-3: #30d5c8;
            --overlay: rgba(63, 81, 181, 0.85);
            --hover-transform: translateY(-4px) rotate(1deg);
            --transition-speed: 0.6s;
            --animation-name: lantern-glow;
            --font-primary: 'Amiri', serif;
            --font-secondary: 'Tajawal', sans-serif;
            --font-weight: 600;
            --letter-spacing: 0.05em;
            --text-transform: capitalize;
            --line-height: 1.6;
            --border-radius: 16px;
            --button-bg: #cc5500;
            --button-text: #ffffff;
            --button-hover-bg: #ff6600;
            --button-border: 2px solid #30d5c8;
            --button-shadow: 0 3px 10px rgba(204, 85, 0, 0.4);
        }

        /* Theme 26: Retrowave Terminal */
        [data-theme="terminal"] {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --bg-tertiary: #1a1a1a;
            --text-primary: #41ff00;
            --text-secondary: #ffb000;
            --text-tertiary: #00ffff;
            --accent-primary: #41ff00;
            --accent-secondary: #ffb000;
            --accent-tertiary: #00ffff;
            --border-primary: #41ff00;
            --border-secondary: #333333;
            --shadow-primary: rgba(65, 255, 0, 0.6);
            --shadow-secondary: rgba(255, 176, 0, 0.4);
            --gradient-1: #41ff00;
            --gradient-2: #ffb000;
            --gradient-3: #00ffff;
            --overlay: rgba(0, 0, 0, 0.9);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.1s;
            --animation-name: terminal-blink;
            --font-primary: 'VT323', monospace;
            --font-secondary: 'Share Tech Mono', monospace;
            --font-weight: 400;
            --letter-spacing: 0.1em;
            --text-transform: none;
            --line-height: 1.4;
            --border-radius: 0px;
            --button-bg: #000000;
            --button-text: #41ff00;
            --button-hover-bg: #0a0a0a;
            --button-border: 1px solid #41ff00;
            --button-shadow: 0 0 5px rgba(65, 255, 0, 0.5);
        }

        /* Theme 27: Swiss Design Grid */
        [data-theme="swiss"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f0f0f0;
            --bg-tertiary: #e0e0e0;
            --text-primary: #000000;
            --text-secondary: #cc0000;
            --text-tertiary: #555555;
            --accent-primary: #cc0000;
            --accent-secondary: #000000;
            --accent-tertiary: #808080;
            --border-primary: #000000;
            --border-secondary: #ff0000;
            --shadow-primary: rgba(255, 0, 0, 0.2);
            --shadow-secondary: rgba(0, 0, 0, 0.1);
            --gradient-1: #ff0000;
            --gradient-2: #000000;
            --gradient-3: #ffffff;
            --overlay: rgba(255, 255, 255, 0.95);
            --hover-transform: translateY(-4px);
            --transition-speed: 0.2s;
            --animation-name: grid-snap;
            --font-primary: 'Helvetica Neue', sans-serif;
            --font-secondary: 'Arial', sans-serif;
            --font-weight: 500;
            --letter-spacing: -0.02em;
            --text-transform: none;
            --line-height: 1.45;
            --border-radius: 0px;
            --button-bg: #cc0000;
            --button-text: #ffffff;
            --button-hover-bg: #990000;
            --button-border: 2px solid #000000;
            --button-shadow: none;
        }

        /* Theme 28: Celestial Observatory */
        [data-theme="celestial"] {
            --bg-primary: #191970;
            --bg-secondary: #000033;
            --bg-tertiary: #2d2d5a;
            --text-primary: #ffd700;
            --text-secondary: #f8f8ff;
            --text-tertiary: #c0c0c0;
            --accent-primary: #ffd700;
            --accent-secondary: #8b008b;
            --accent-tertiary: #f8f8ff;
            --border-primary: #ffd700;
            --border-secondary: #8b008b;
            --shadow-primary: rgba(255, 215, 0, 0.4);
            --shadow-secondary: rgba(139, 0, 139, 0.3);
            --gradient-1: #191970;
            --gradient-2: #ffd700;
            --gradient-3: #8b008b;
            --overlay: rgba(25, 25, 112, 0.85);
            --hover-transform: translateY(-4px) rotate(360deg);
            --transition-speed: 1.5s;
            --animation-name: constellation-trace;
            --font-primary: 'Cinzel', serif;
            --font-secondary: 'Cormorant Garamond', serif;
            --font-weight: 300;
            --letter-spacing: 0.12em;
            --text-transform: none;
            --line-height: 1.7;
            --border-radius: 12px;
            --button-bg: linear-gradient(135deg, #191970, #ffd700);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(135deg, #ffd700, #191970);
            --button-border: none;
            --button-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        /* Theme 29: Memphis Milano */
        [data-theme="memphis"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f0f0f0;
            --bg-tertiary: #fff5cc;
            --text-primary: #000000;
            --text-secondary: #0033cc;
            --text-tertiary: #d1458f;
            --accent-primary: #ffcc00;
            --accent-secondary: #0033cc;
            --accent-tertiary: #ff69b4;
            --border-primary: #000000;
            --border-secondary: #0000ff;
            --shadow-primary: rgba(255, 255, 0, 0.4);
            --shadow-secondary: rgba(0, 0, 255, 0.3);
            --gradient-1: #ffff00;
            --gradient-2: #0000ff;
            --gradient-3: #ff69b4;
            --overlay: rgba(255, 255, 255, 0.8);
            --hover-transform: translateY(-5px) rotate(-5deg);
            --transition-speed: 0.3s;
            --animation-name: memphis-wiggle;
            --font-primary: 'Righteous', sans-serif;
            --font-secondary: 'Fredoka One', sans-serif;
            --font-weight: 900;
            --letter-spacing: -0.05em;
            --text-transform: uppercase;
            --line-height: 1.2;
            --border-radius: 50%;
            --button-bg: #ffcc00;
            --button-text: #000000;
            --button-hover-bg: #ffff00;
            --button-border: 3px solid #0033cc;
            --button-shadow: 5px 5px 0px #ff69b4;
        }

        /* Theme 30: Industrial Loft */
        [data-theme="industrial"] {
            --bg-primary: #2c2c2c;
            --bg-secondary: #3d3d3d;
            --bg-tertiary: #4e4e4e;
            --text-primary: #ffffff;
            --text-secondary: #ffa500;
            --text-tertiary: #c0c0c0;
            --accent-primary: #8b4513;
            --accent-secondary: #71797e;
            --accent-tertiary: #ffa500;
            --border-primary: #71797e;
            --border-secondary: #8b4513;
            --shadow-primary: rgba(139, 69, 19, 0.4);
            --shadow-secondary: rgba(255, 165, 0, 0.2);
            --gradient-1: #8b4513;
            --gradient-2: #71797e;
            --gradient-3: #ffa500;
            --overlay: rgba(44, 44, 44, 0.9);
            --hover-transform: translateY(-3px);
            --transition-speed: 0.4s;
            --animation-name: bulb-flicker;
            --font-primary: 'Oswald', sans-serif;
            --font-secondary: 'Barlow Condensed', sans-serif;
            --font-weight: 800;
            --letter-spacing: 0.02em;
            --text-transform: uppercase;
            --line-height: 1.3;
            --border-radius: 2px;
            --button-bg: #8b4513;
            --button-text: #ffa500;
            --button-hover-bg: #a0522d;
            --button-border: 3px solid #2c2c2c;
            --button-shadow: inset 0 -3px 0 rgba(0,0,0,0.4);
        }

        /* Theme 31: Persian Tapestry */
        [data-theme="persian"] {
            --bg-primary: #6a0dad;
            --bg-secondary: #7b1fa2;
            --bg-tertiary: #8e24aa;
            --text-primary: #ffd700;
            --text-secondary: #ffffff;
            --text-tertiary: #e0e0e0;
            --accent-primary: #0f52ba;
            --accent-secondary: #e0115f;
            --accent-tertiary: #ffd700;
            --border-primary: #ffd700;
            --border-secondary: #0f52ba;
            --shadow-primary: rgba(255, 215, 0, 0.5);
            --shadow-secondary: rgba(224, 17, 95, 0.3);
            --gradient-1: #6a0dad;
            --gradient-2: #0f52ba;
            --gradient-3: #e0115f;
            --overlay: rgba(106, 13, 173, 0.8);
            --hover-transform: translateY(-4px) scale(1.05);
            --transition-speed: 0.6s;
            --animation-name: silk-shimmer;
            --font-primary: 'Scheherazade New', serif;
            --font-secondary: 'Vazirmatn', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.03em;
            --text-transform: capitalize;
            --line-height: 1.65;
            --border-radius: 10px;
            --button-bg: linear-gradient(45deg, #6a0dad, #0f52ba);
            --button-text: #ffd700;
            --button-hover-bg: linear-gradient(45deg, #0f52ba, #6a0dad);
            --button-border: 2px solid #ffd700;
            --button-shadow: 0 4px 15px rgba(106, 13, 173, 0.4);
        }

        /* Theme 32: Bauhaus Primary */
        [data-theme="bauhaus"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #e0e0e0;
            --text-primary: #000000;
            --text-secondary: #cc0000;
            --text-tertiary: #0033cc;
            --accent-primary: #cc0000;
            --accent-secondary: #ffcc00;
            --accent-tertiary: #0033cc;
            --border-primary: #000000;
            --border-secondary: #808080;
            --shadow-primary: rgba(0, 0, 0, 0.3);
            --shadow-secondary: rgba(255, 0, 0, 0.2);
            --gradient-1: #ff0000;
            --gradient-2: #ffff00;
            --gradient-3: #0000ff;
            --overlay: rgba(255, 255, 255, 0.9);
            --hover-transform: translateY(-4px) rotate(90deg);
            --transition-speed: 0.3s;
            --animation-name: bauhaus-construct;
            --font-primary: 'Bebas Neue', sans-serif;
            --font-secondary: 'Roboto', sans-serif;
            --font-weight: 700;
            --letter-spacing: -0.01em;
            --text-transform: none;
            --line-height: 1.25;
            --border-radius: 0px;
            --button-bg: #cc0000;
            --button-text: #ffffff;
            --button-hover-bg: #0033cc;
            --button-border: 3px solid #000000;
            --button-shadow: none;
        }

        /* Theme 33: Noir Detective */
        [data-theme="noir"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #f0f0f0;
            --text-secondary: #8b0000;
            --text-tertiary: #848884;
            --accent-primary: #8b0000;
            --accent-secondary: #b87333;
            --accent-tertiary: #ffffff;
            --border-primary: #848884;
            --border-secondary: #8b0000;
            --shadow-primary: rgba(139, 0, 0, 0.5);
            --shadow-secondary: rgba(132, 136, 132, 0.3);
            --gradient-1: #0a0a0a;
            --gradient-2: #8b0000;
            --gradient-3: #b87333;
            --overlay: rgba(10, 10, 10, 0.95);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.4s;
            --animation-name: shadow-flicker;
            --font-primary: 'Special Elite', sans-serif;
            --font-secondary: 'Courier Prime', monospace;
            --font-weight: 400;
            --letter-spacing: 0.08em;
            --text-transform: none;
            --line-height: 1.5;
            --border-radius: 4px;
            --button-bg: #1a1a1a;
            --button-text: #b87333;
            --button-hover-bg: #2a2a2a;
            --button-border: 1px solid #b87333;
            --button-shadow: 0 2px 10px rgba(0,0,0,0.8);
        }

        /* Theme 34: Terrazzo Modern */
        [data-theme="terrazzo"] {
            --bg-primary: #fffdd0;
            --bg-secondary: #fff5ee;
            --bg-tertiary: #ffe4e1;
            --text-primary: #2d2d2d;
            --text-secondary: #4a4a4a;
            --text-tertiary: #666666;
            --accent-primary: #ffc0cb;
            --accent-secondary: #9caf88;
            --accent-tertiary: #e2725b;
            --border-primary: #e2725b;
            --border-secondary: #9caf88;
            --shadow-primary: rgba(226, 114, 91, 0.2);
            --shadow-secondary: rgba(156, 175, 136, 0.15);
            --gradient-1: #ffc0cb;
            --gradient-2: #9caf88;
            --gradient-3: #e2725b;
            --overlay: rgba(255, 253, 208, 0.85);
            --hover-transform: translateY(-3px) rotate(2deg);
            --transition-speed: 0.5s;
            --animation-name: chip-scatter;
            --font-primary: 'DM Sans', sans-serif;
            --font-secondary: 'Nunito', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.01em;
            --text-transform: none;
            --line-height: 1.7;
            --border-radius: 18px;
            --button-bg: #e2725b;
            --button-text: #ffffff;
            --button-hover-bg: #ff6347;
            --button-border: none;
            --button-shadow: 0 3px 12px rgba(226, 114, 91, 0.3);
        }

        /* Theme 35: Kinetic Energy */
        [data-theme="kinetic"] {
            --bg-primary: #000000;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ccff00;
            --text-secondary: #ff0066;
            --text-tertiary: #00ffff;
            --accent-primary: #ccff00;
            --accent-secondary: #ff0066;
            --accent-tertiary: #9400d3;
            --border-primary: #ccff00;
            --border-secondary: #ff0066;
            --shadow-primary: rgba(204, 255, 0, 0.6);
            --shadow-secondary: rgba(255, 0, 102, 0.4);
            --gradient-1: #ccff00;
            --gradient-2: #ff0066;
            --gradient-3: #00ffff;
            --overlay: rgba(0, 0, 0, 0.8);
            --hover-transform: translateY(-6px) skew(-3deg);
            --transition-speed: 0.2s;
            --animation-name: energy-flow;
            --font-primary: 'Michroma', sans-serif;
            --font-secondary: 'Exo', sans-serif;
            --font-weight: 600;
            --letter-spacing: 0.15em;
            --text-transform: uppercase;
            --line-height: 1.3;
            --border-radius: 6px;
            --button-bg: linear-gradient(90deg, #ccff00, #ff0066, #ccff00);
            --button-text: #000000;
            --button-hover-bg: linear-gradient(90deg, #ff0066, #ccff00, #ff0066);
            --button-border: none;
            --button-shadow: 0 0 20px rgba(204, 255, 0, 0.6);
        }

        /* Theme 36: Architectural Blueprint */
        [data-theme="blueprint"] {
            --bg-primary: #0047ab;
            --bg-secondary: #1e5ba8;
            --bg-tertiary: #3670a5;
            --text-primary: #ffffff;
            --text-secondary: #ffeb3b;
            --text-tertiary: #c0c0c0;
            --accent-primary: #ffeb3b;
            --accent-secondary: #ffffff;
            --accent-tertiary: #c0c0c0;
            --border-primary: #ffffff;
            --border-secondary: #c0c0c0;
            --shadow-primary: rgba(255, 235, 59, 0.3);
            --shadow-secondary: rgba(255, 255, 255, 0.2);
            --gradient-1: #0047ab;
            --gradient-2: #ffffff;
            --gradient-3: #ffeb3b;
            --overlay: rgba(0, 71, 171, 0.9);
            --hover-transform: translateY(-3px);
            --transition-speed: 0.3s;
            --animation-name: grid-draw;
            --font-primary: 'Rajdhani', sans-serif;
            --font-secondary: 'Architects Daughter', sans-serif;
            --font-weight: 500;
            --letter-spacing: 0.05em;
            --text-transform: uppercase;
            --line-height: 1.4;
            --border-radius: 0px;
            --button-bg: #0047ab;
            --button-text: #ffffff;
            --button-hover-bg: #003d8f;
            --button-border: 2px solid #ffeb3b;
            --button-shadow: none;
        }

        /* Theme 37: Volcanic Forge */
        [data-theme="volcanic"] {
            --bg-primary: #0a0a0a;
            --bg-secondary: #1c1c1c;
            --bg-tertiary: #2e2e2e;
            --text-primary: #ff4500;
            --text-secondary: #ffa500;
            --text-tertiary: #ffff00;
            --accent-primary: #ff4500;
            --accent-secondary: #cf1020;
            --accent-tertiary: #ffa500;
            --border-primary: #ff4500;
            --border-secondary: #bebebe;
            --shadow-primary: rgba(255, 69, 0, 0.6);
            --shadow-secondary: rgba(207, 16, 32, 0.4);
            --gradient-1: #ff4500;
            --gradient-2: #cf1020;
            --gradient-3: #ffa500;
            --overlay: rgba(10, 10, 10, 0.85);
            --hover-transform: translateY(-4px) scale(1.02);
            --transition-speed: 0.4s;
            --animation-name: lava-flow;
            --font-primary: 'Black Ops One', sans-serif;
            --font-secondary: 'Russo One', sans-serif;
            --font-weight: 900;
            --letter-spacing: -0.02em;
            --text-transform: uppercase;
            --line-height: 1.2;
            --border-radius: 4px;
            --button-bg: linear-gradient(180deg, #ff4500, #cf1020);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(180deg, #cf1020, #8b0000);
            --button-border: none;
            --button-shadow: 0 4px 20px rgba(255, 69, 0, 0.6), inset 0 -2px 10px rgba(0,0,0,0.4);
        }

        /* Theme 38: Pastel Dream */
        [data-theme="pastel"] {
            --bg-primary: #ffeeff;
            --bg-secondary: #fff0f5;
            --bg-tertiary: #f0ffff;
            --text-primary: #4a3d6b;
            --text-secondary: #5a7a96;
            --text-tertiary: #666666;
            --accent-primary: #e6e6fa;
            --accent-secondary: #ffdab9;
            --accent-tertiary: #98ff98;
            --border-primary: #e6e6fa;
            --border-secondary: #87ceeb;
            --shadow-primary: rgba(230, 230, 250, 0.4);
            --shadow-secondary: rgba(135, 206, 235, 0.3);
            --gradient-1: #e6e6fa;
            --gradient-2: #ffdab9;
            --gradient-3: #98ff98;
            --overlay: rgba(255, 238, 255, 0.85);
            --hover-transform: translateY(-3px) scale(1.01);
            --transition-speed: 0.6s;
            --animation-name: cloud-float;
            --font-primary: 'Caveat', sans-serif;
            --font-secondary: 'Mali', sans-serif;
            --font-weight: 300;
            --letter-spacing: 0.03em;
            --text-transform: none;
            --line-height: 1.9;
            --border-radius: 25px;
            --button-bg: #ffdab9;
            --button-text: #4a3d6b;
            --button-hover-bg: #ffc0cb;
            --button-border: none;
            --button-shadow: 0 2px 8px rgba(255, 218, 185, 0.3);
        }

        /* Theme 39: Chromatic Spectrum */
        [data-theme="chromatic"] {
            --bg-primary: #000000;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #f0f0f0;
            --text-tertiary: #e0e0e0;
            --accent-primary: #ff0000;
            --accent-secondary: #00ff00;
            --accent-tertiary: #0000ff;
            --border-primary: #ffffff;
            --border-secondary: #808080;
            --shadow-primary: rgba(255, 255, 255, 0.5);
            --shadow-secondary: rgba(128, 128, 128, 0.3);
            --gradient-1: #ff0000;
            --gradient-2: #00ff00;
            --gradient-3: #0000ff;
            --overlay: rgba(0, 0, 0, 0.7);
            --hover-transform: translateY(-5px) rotate(180deg);
            --transition-speed: 0.8s;
            --animation-name: rainbow-shift;
            --font-primary: 'Bungee', sans-serif;
            --font-secondary: 'Rubik', sans-serif;
            --font-weight: 700;
            --letter-spacing: 0.1em;
            --text-transform: none;
            --line-height: 1.4;
            --border-radius: var(--border-radius, 8px);
            --button-bg: linear-gradient(90deg, #ff0000, #00ff00, #0000ff, #ff0000);
            --button-text: #ffffff;
            --button-hover-bg: linear-gradient(90deg, #0000ff, #ff0000, #00ff00, #0000ff);
            --button-border: none;
            --button-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }

        /* Theme 40: Minimalist Shadow */
        [data-theme="shadow"] {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #e0e0e0;
            --text-primary: #0d0d0d;
            --text-secondary: #2a2a2a;
            --text-tertiary: #4a4a4a;
            --accent-primary: #000000;
            --accent-secondary: #808080;
            --accent-tertiary: #c0c0c0;
            --border-primary: #d0d0d0;
            --border-secondary: #e0e0e0;
            --shadow-primary: rgba(0, 0, 0, 0.15);
            --shadow-secondary: rgba(0, 0, 0, 0.08);
            --gradient-1: #f5f5f5;
            --gradient-2: #e0e0e0;
            --gradient-3: #d0d0d0;
            --overlay: rgba(255, 255, 255, 0.95);
            --hover-transform: translateY(-2px);
            --transition-speed: 0.4s;
            --animation-name: shadow-play;
            --font-primary: 'Inter', sans-serif;
            --font-secondary: 'Karla', sans-serif;
            --font-weight: 400;
            --letter-spacing: 0.02em;
            --text-transform: none;
            --line-height: 1.6;
            --border-radius: 10px;
            --button-bg: #1a1a1a;
            --button-text: #ffffff;
            --button-hover-bg: #333333;
            --button-border: 1px solid #666666;
            --button-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        /* Theme Animations */
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes matrix-rain {
            0% { transform: translateY(-100%); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { transform: translateY(100vh); opacity: 0; }
        }

        @keyframes neon-pulse {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 5px var(--accent-primary)); }
            50% { filter: brightness(1.2) drop-shadow(0 0 20px var(--accent-primary)); }
        }

        @keyframes paper-flutter {
            0%, 100% { transform: rotate(-0.5deg) translateY(0); }
            50% { transform: rotate(0.5deg) translateY(-2px); }
        }

        @keyframes glass-shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }

        @keyframes ocean-wave {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-5px) scale(1.02); }
        }

        @keyframes nebula-swirl {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes gear-rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes aurora-dance {
            0%, 100% { filter: brightness(1) hue-rotate(0deg); }
            25% { filter: brightness(1.1) hue-rotate(10deg); }
            50% { filter: brightness(0.9) hue-rotate(-10deg); }
            75% { filter: brightness(1.05) hue-rotate(5deg); }
        }

        @keyframes neon-flicker {
            0%, 100% { opacity: 1; }
            92% { opacity: 1; }
            93% { opacity: 0.6; }
            94% { opacity: 1; }
            96% { opacity: 0.8; }
        }

        @keyframes sand-drift {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(3px); }
        }

        @keyframes firefly-dance {
            0% { transform: translate(0, 0); opacity: 0; }
            20% { opacity: 1; }
            100% { transform: translate(100px, -100px); opacity: 0; }
        }

        @keyframes concrete-shift {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(1px); }
        }

        @keyframes vaporwave-glitch {
            0%, 100% { transform: skew(0deg); }
            20% { transform: skew(2deg); }
            40% { transform: skew(-2deg); }
            60% { transform: skew(1deg); }
            80% { transform: skew(-1deg); }
        }

        @keyframes ink-bleed {
            0% { filter: blur(0); }
            50% { filter: blur(1px); }
            100% { filter: blur(0); }
        }

        @keyframes sunset-glow {
            0%, 100% { filter: brightness(1) saturate(1); }
            50% { filter: brightness(1.1) saturate(1.2); }
        }

        @keyframes quantum-flux {
            0% { transform: perspective(400px) rotateY(0); }
            100% { transform: perspective(400px) rotateY(360deg); }
        }

        @keyframes palm-sway {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }

        @keyframes candle-flicker {
            0%, 100% { filter: brightness(1); }
            25% { filter: brightness(0.95); }
            50% { filter: brightness(1.05); }
            75% { filter: brightness(0.98); }
        }

        @keyframes hologram-scan {
            0% { transform: translateY(100%) scaleY(2); opacity: 0; }
            40%, 60% { transform: translateY(0) scaleY(1); opacity: 1; }
            100% { transform: translateY(-100%) scaleY(2); opacity: 0; }
        }

        @keyframes water-ripple {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        @keyframes organic-morph {
            0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
            50% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
        }

        @keyframes deco-sunburst {
            0% { transform: scale(1) rotate(0deg); }
            100% { transform: scale(1) rotate(360deg); }
        }

        @keyframes frost-crystal {
            0%, 100% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.1); opacity: 1; }
        }

        @keyframes dna-helix {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(360deg); }
        }

        @keyframes lantern-glow {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 10px var(--accent-primary)); }
            50% { filter: brightness(1.3) drop-shadow(0 0 20px var(--accent-primary)); }
        }

        @keyframes terminal-blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        @keyframes grid-snap {
            0% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(10px) translateY(0); }
            50% { transform: translateX(10px) translateY(10px); }
            75% { transform: translateX(0) translateY(10px); }
            100% { transform: translateX(0) translateY(0); }
        }

        @keyframes constellation-trace {
            0% { stroke-dashoffset: 1000; }
            100% { stroke-dashoffset: 0; }
        }

        @keyframes memphis-wiggle {
            0%, 100% { transform: rotate(-3deg); }
            25% { transform: rotate(3deg) translateX(2px); }
            50% { transform: rotate(-3deg) translateY(2px); }
            75% { transform: rotate(3deg) translateX(-2px); }
        }

        @keyframes bulb-flicker {
            0%, 100% { filter: brightness(1) sepia(0.3); }
            10% { filter: brightness(0.8) sepia(0.3); }
            11% { filter: brightness(1) sepia(0.3); }
            40% { filter: brightness(0.9) sepia(0.3); }
            41% { filter: brightness(1) sepia(0.3); }
        }

        @keyframes silk-shimmer {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes bauhaus-construct {
            0% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
            25% { clip-path: polygon(0 0, 100% 0, 100% 75%, 0 100%); }
            50% { clip-path: polygon(25% 0, 100% 0, 100% 100%, 0 100%); }
            75% { clip-path: polygon(0 0, 75% 0, 100% 100%, 0 100%); }
            100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); }
        }

        @keyframes shadow-flicker {
            0%, 100% { text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
            50% { text-shadow: 3px 3px 6px rgba(0,0,0,0.7); }
        }

        @keyframes chip-scatter {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(5px, -5px) rotate(120deg); }
            66% { transform: translate(-5px, 5px) rotate(240deg); }
        }

        @keyframes energy-flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes grid-draw {
            0% { stroke-dasharray: 0 1000; }
            100% { stroke-dasharray: 1000 0; }
        }

        @keyframes lava-flow {
            0%, 100% { filter: brightness(1) hue-rotate(0deg); }
            33% { filter: brightness(1.2) hue-rotate(10deg); }
            66% { filter: brightness(0.9) hue-rotate(-10deg); }
        }

        @keyframes cloud-float {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(20px) translateY(-10px); }
            50% { transform: translateX(-10px) translateY(5px); }
            75% { transform: translateX(15px) translateY(-5px); }
        }

        @keyframes rainbow-shift {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }

        @keyframes shadow-play {
            0%, 100% { box-shadow: 2px 2px 5px var(--shadow-primary); }
            25% { box-shadow: 3px 3px 8px var(--shadow-primary); }
            50% { box-shadow: 1px 1px 3px var(--shadow-primary); }
            75% { box-shadow: 4px 4px 10px var(--shadow-primary); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        /* Base styles using CSS variables */
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: var(--font-primary);
            font-weight: var(--font-weight, 400);
            letter-spacing: var(--letter-spacing, normal);
            line-height: var(--line-height, 1.6);
            padding: 2rem;
            margin: 0;
            transition: all var(--transition-speed) ease;
            position: relative;
            overflow-x: hidden;
        }

        /* Theme-specific background effects */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            animation: var(--animation-name) 10s ease-in-out infinite;
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-shift 5s ease infinite;
            text-transform: var(--text-transform, none);
            letter-spacing: var(--letter-spacing, normal);
            font-weight: var(--font-weight, 700);
        }
        h2, h3, h4 {
            text-transform: var(--text-transform, none);
            letter-spacing: var(--letter-spacing, normal);
            font-weight: var(--font-weight, 600);
        }
        
        .video-container {
            background: var(--bg-tertiary);
            border-radius: var(--border-radius, 12px);
            border-radius: var(--border-radius, 12px);
            border: 1px solid var(--border-secondary);
            cursor: pointer;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            overflow: hidden;
        }
        .video-container:hover {
            transform: var(--hover-transform);
            box-shadow: 0 4px 20px var(--shadow-primary);
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        .video-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }
        .video-list .video-container {
            display: flex;
            align-items: center;
            padding: 1rem;
        }
        .video-list .video-thumbnail {
            width: 120px;
            height: 67px;
            margin-right: 1rem;
            border-radius: var(--border-radius, 8px);
        }
        .video-list .video-info {
            flex: 1;
        }
        .view-toggle {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-left: auto;
        }
        .view-toggle button {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid #444;
            padding: 0.4rem 0.8rem;
            font-size: 0.9rem;
        }
        .view-toggle button.active {
            background: var(--accent-primary);
            color: #121212;
            border-color: var(--text-primary);
        }
        .video-thumbnail {
            width: 100%;
            height: 160px;
            object-fit: cover;
            background: #222;
            border-radius: 8px 8px 0 0;
        }
        .video-info {
            padding: 0.8rem;
        }
        .video-title {
            color: #ff5555;
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 0.3rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .video-category {
            color: #666;
            font-size: 0.85rem;
        }
        iframe {
            width: 100%;
            height: 400px;
            border-radius: var(--border-radius, 8px);
            box-shadow: 0 0 20px #00ff66;
        }
        .input-section {
            background: #222;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }
        .button-group {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }
        .button-group button {
            flex: 1;
            min-width: 120px;
        }
        input {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            color: var(--text-primary);
            padding: 0.5rem;
            width: 60%;
            margin-right: 1rem;
            border-radius: 5px;
        }
        button {
            background: var(--button-bg, #00ff66);
            color: var(--button-text, #121212);
            border: var(--button-border, none);
            padding: 0.5rem 1rem;
            cursor: pointer;
            font-weight: var(--font-weight, bold);
            letter-spacing: var(--letter-spacing, normal);
            text-transform: var(--text-transform, none);
            border-radius: var(--border-radius, 5px);
            box-shadow: var(--button-shadow, none);
            transition: all var(--transition-speed, 0.3s) ease;
        }
        button:hover {
            background: var(--button-hover-bg, #00cc55);
            transform: var(--hover-transform, none);
        }
        .header-section {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            padding: 2rem;
            border-radius: var(--border-radius, 12px);
            margin-bottom: 2rem;
            border: 2px solid var(--border-secondary);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow-primary);
        }
        .hero-section {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 20px;
            margin-bottom: 3rem;
            border: 1px solid #333;
            position: relative;
            overflow: hidden;
        }
        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0,255,102,0.1) 0%, transparent 70%);
            animation: pulse 6s ease-in-out infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        .hero-title {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(to right, #ff3b3b, #00ff66, #ff3b3b);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% auto;
            animation: gradient 3s linear infinite;
        }
        @keyframes gradient {
            to { background-position: 200% center; }
        }
        .hero-subtitle {
            font-size: 1.5rem;
            color: #aaa;
            margin-bottom: 2rem;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
            position: relative;
            z-index: 1;
        }
        .stat-card {
            background: #2a2a2a;
            padding: 1.5rem;
            border-radius: var(--border-radius, 12px);
            border: 1px solid #444;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 255, 102, 0.2);
        }
        .stat-number {
            font-size: 2rem;
            color: var(--text-primary);
            font-weight: bold;
        }
        .stat-label {
            color: #888;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        .header-section h2 {
            color: #ff3b3b;
            margin-bottom: 1rem;
        }
        .header-section p {
            color: #aaa;
            line-height: 1.6;
        }
        .feature-list {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        .feature-badge {
            background: rgba(0, 255, 102, 0.1);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(0, 255, 102, 0.3);
            color: var(--text-primary);
        }
        .categories-section {
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: var(--border-radius, 12px);
            margin-bottom: 2rem;
            border: 1px solid #333;
        }
        .category-pills {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        .category-pill {
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: 0.3rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            border: 1px solid var(--border-primary);
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        .category-pill:hover {
            background: var(--accent-primary);
            color: #121212;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 255, 102, 0.3);
        }
        .category-pill.active {
            background: var(--accent-primary);
            color: #121212;
            box-shadow: 0 0 15px rgba(0, 255, 102, 0.5);
        }
        .mode-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 1000;
            background: rgba(18, 18, 18, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 1px solid #333;
        }
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--bg-secondary);
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        .toggle-switch.active {
            background: var(--accent-primary);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3), 0 0 10px rgba(0, 255, 102, 0.5);
        }
        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: #fff;
            border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .toggle-switch.active .toggle-slider {
            transform: translateX(30px);
        }
        .private-badge {
            background: #ff3b3b;
            color: #fff;
            padding: 0.2rem 0.6rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }
        .playback-controls {
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: var(--border-radius, 12px);
            margin-bottom: 2rem;
            border: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .control-button {
            background: linear-gradient(135deg, #333 0%, #444 100%);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
            padding: 0.6rem 1.2rem;
            border-radius: var(--border-radius, 8px);
            cursor: pointer;
            transition: all 0.3s;
            font-family: monospace;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 255, 102, 0.2);
        }
        .control-button:hover {
            background: linear-gradient(135deg, #00ff66 0%, #00cc55 100%);
            color: #121212;
            box-shadow: 0 4px 15px rgba(0, 255, 102, 0.4);
            transform: translateY(-1px);
        }
        .control-button.active {
            background: linear-gradient(135deg, #00ff66 0%, #00cc55 100%);
            color: #121212;
        }
        .now-playing {
            flex: 1;
            color: #aaa;
            font-size: 1rem;
            min-width: 200px;
        }
        .now-playing strong {
            color: #ff3b3b;
        }
        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #ff3b3b;
            color: #fff;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        .video-container:hover .delete-btn {
            display: flex;
        }
        .delete-btn:hover {
            background: #cc0000;
            transform: scale(1.1);
        }
        .category-pill {
            position: relative;
            padding-right: 2rem;
        }
        .category-delete {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #ff3b3b;
            cursor: pointer;
            font-size: 1rem;
            display: none;
            padding: 0 5px;
        }
        .category-pill:hover .category-delete {
            display: inline;
        }
        .video-container.playing {
            border: 2px solid #00ff66;
            box-shadow: 0 0 20px rgba(0, 255, 102, 0.5);
        }
        .video-container.playing::before {
            content: '▶️';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: var(--text-primary);
            background: rgba(0, 0, 0, 0.8);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--accent-primary);
            color: #121212;
            padding: 1rem 2rem;
            border-radius: var(--border-radius, 8px);
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(0, 255, 102, 0.5);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 10000;
        }
        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }
        .thumbnail-loading {
            background: linear-gradient(90deg, #222 0%, #333 50%, #222 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .launcher-tile:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: #00ff66 !important;
            box-shadow: 0 10px 30px rgba(0, 255, 102, 0.3);
        }
        .launcher-tile:hover h3 {
            text-shadow: 0 0 20px currentColor;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .drop-zone {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 255, 102, 0.1);
            border: 4px dashed #00ff66;
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9998;
            pointer-events: none;
        }
        .drop-zone.active {
            display: flex;
        }
        .drop-zone-text {
            font-size: 2rem;
            color: var(--text-primary);
            background: rgba(18, 18, 18, 0.95);
            padding: 2rem 3rem;
            border-radius: var(--border-radius, 12px);
            box-shadow: 0 0 30px rgba(0, 255, 102, 0.5);
        }
        
        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
        
        .reduced-motion *, 
        .reduced-motion *::before, 
        .reduced-motion *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
            scroll-behavior: auto !important;
        }
        
        /* Enhanced text readability for light themes */
        [data-theme="pastel"] h1,
        [data-theme="pastel"] h2,
        [data-theme="pastel"] h3,
        [data-theme="terrazzo"] h1,
        [data-theme="terrazzo"] h2,
        [data-theme="terrazzo"] h3,
        [data-theme="zen"] h1,
        [data-theme="zen"] h2,
        [data-theme="zen"] h3,
        [data-theme="scandinavian"] h1,
        [data-theme="scandinavian"] h2,
        [data-theme="scandinavian"] h3,
        [data-theme="biolab"] h1,
        [data-theme="biolab"] h2,
        [data-theme="biolab"] h3,
        [data-theme="swiss"] h1,
        [data-theme="swiss"] h2,
        [data-theme="swiss"] h3,
        [data-theme="memphis"] h1,
        [data-theme="memphis"] h2,
        [data-theme="memphis"] h3,
        [data-theme="bauhaus"] h1,
        [data-theme="bauhaus"] h2,
        [data-theme="bauhaus"] h3,
        [data-theme="shadow"] h1,
        [data-theme="shadow"] h2,
        [data-theme="shadow"] h3 {
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        /* Stronger shadows for very light backgrounds */
        [data-theme="pastel"] .video-title,
        [data-theme="terrazzo"] .video-title,
        [data-theme="scandinavian"] .video-title,
        [data-theme="biolab"] .video-title,
        [data-theme="shadow"] .video-title {
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
        }
        
        /* App Launcher Title Styling */
        .app-launcher-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 3rem;
            background: linear-gradient(to right, var(--gradient-1), var(--gradient-2), var(--gradient-3));
            background-size: 300% 300%;
            animation: gradient-shift 5s ease infinite;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-transform: var(--text-transform, none);
            letter-spacing: var(--letter-spacing, normal);
            font-weight: var(--font-weight, 900);
        }
        
        /* Theme-specific launcher styles */
        [data-theme="brutalist"] .app-launcher-title {
            background: var(--text-primary);
            -webkit-text-fill-color: var(--text-primary);
            text-shadow: 5px 5px 0px var(--bg-primary);
        }
        
        [data-theme="synthwave"] .app-launcher-title {
            filter: drop-shadow(0 0 20px var(--accent-primary));
        }
        
        [data-theme="terminal"] .app-launcher-title {
            background: var(--text-primary);
            -webkit-text-fill-color: var(--text-primary);
            animation: terminal-blink 1s steps(1) infinite;
        }
        
        @keyframes terminal-blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.8; }
        }
        
        /* Launcher tiles */
        .launcher-tile {
            background: var(--bg-secondary);
            border: 2px solid var(--border-secondary);
            border-radius: var(--border-radius, 20px);
            padding: 3rem;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .launcher-tile:hover {
            transform: var(--hover-transform);
            box-shadow: var(--button-shadow);
            border-color: var(--border-primary);
        }
        
        .launcher-tile h2 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }
        
        .launcher-tile p {
            color: var(--text-secondary);
        }
        
        /* Podcast Mode Styles */
        .podcast-quick-add {
            background: var(--bg-secondary);
            color: #ff3b3b;
            border: 2px solid #ff3b3b;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius, 8px);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .podcast-quick-add:hover {
            background: #ff3b3b;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 59, 59, 0.4);
        }
        
        .podcast-card {
            background: var(--bg-secondary);
            border: 2px solid var(--border-secondary);
            border-radius: var(--border-radius, 15px);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .podcast-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent, rgba(255, 59, 59, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .podcast-card:hover::before {
            opacity: 1;
        }
        
        .podcast-card:hover {
            transform: translateY(-5px);
            border-color: #ff3b3b;
            box-shadow: 0 10px 30px rgba(255, 59, 59, 0.3);
        }
        
        .podcast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #ff3b3b, #ff6b6b);
            transition: width 0.3s ease;
        }
        
        .episode-duration {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        /* Radio Mode Styles */
        .radio-category-btn {
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: var(--border-radius, 25px);
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .radio-category-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .radio-category-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .radio-category-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .radio-station {
            background: var(--bg-secondary);
            border: 2px solid var(--border-secondary);
            border-radius: var(--border-radius, 15px);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .radio-station::after {
            content: '📻';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 4rem;
            opacity: 0.1;
            transform: rotate(-15deg);
            transition: all 0.3s ease;
        }
        
        .radio-station:hover::after {
            transform: rotate(0deg) scale(1.2);
            opacity: 0.2;
        }
        
        .radio-station:hover {
            transform: translateY(-5px);
            border-color: #3b82ff;
            box-shadow: 0 10px 30px rgba(59, 130, 255, 0.3);
            background: linear-gradient(135deg, var(--bg-secondary), rgba(59, 130, 255, 0.1));
        }
        
        .radio-control-btn {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 2px solid #3b82ff;
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius, 8px);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .radio-control-btn:hover {
            background: #3b82ff;
            color: white;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(59, 130, 255, 0.4);
        }
        
        .radio-visualizer {
            height: 100px;
            background: linear-gradient(135deg, transparent, rgba(59, 130, 255, 0.1));
            border-radius: var(--border-radius, 10px);
            margin: 1rem 0;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 0.5rem;
            gap: 2px;
        }
        
        .radio-bar {
            width: 4px;
            background: linear-gradient(to top, #3b82ff, #00ffff);
            border-radius: 2px;
            animation: wave 1s ease-in-out infinite;
            animation-delay: calc(var(--i) * 0.1s);
        }
        
        @keyframes wave {
            0%, 100% { height: 20%; }
            50% { height: var(--height, 80%); }
        }
        
        /* Download Indicator */
        .download-status {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .download-status.downloaded {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #00ff00;
        }
        
        .download-status.downloading {
            background: rgba(255, 165, 0, 0.2);
            border: 2px solid orange;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }
        
        /* Continue Listening Section */
        .continue-section {
            background: var(--bg-secondary);
            border-radius: var(--border-radius, 15px);
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 2px solid var(--border-secondary);
        }
        
        .continue-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: var(--border-radius, 10px);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .continue-card:hover {
            transform: translateX(5px);
            box-shadow: -5px 0 20px rgba(255, 59, 59, 0.3);
        }
        
        .continue-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff3b3b, #ff6b6b);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="drop-zone" id="dropZone">
        <div class="drop-zone-text">📂 Drop JSON file to import</div>
    </div>
    
    <div class="mode-toggle">
        <span id="modeLabel">🔓 Public</span>
        <div class="toggle-switch" id="modeToggle" onclick="toggleMode()">
            <div class="toggle-slider"></div>
        </div>
        <span>🔒 Private</span>
    </div>
    
    <!-- App Launcher Dashboard -->
    <div id="appLauncher" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; padding: 2rem;">
        <h1 class="app-launcher-title">
            🔥 THE VAULT
        </h1>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; max-width: 1000px; width: 100%;">
            <!-- Music Player Mode -->
            <div class="launcher-tile" onclick="switchToMode('music')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">🎵</div>
                <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">Music Player</h3>
                <p style="color: #888; font-size: 0.9rem;">Stream & organize music</p>
            </div>
            
            <!-- Podcast Mode -->
            <div class="launcher-tile" onclick="switchToMode('podcast')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">🎙️</div>
                <h3 style="color: #ff3b3b; margin-bottom: 0.5rem;">Podcasts</h3>
                <p style="color: #888; font-size: 0.9rem;">RSS feeds & episodes</p>
            </div>
            
            <!-- Radio Mode -->
            <div class="launcher-tile" onclick="switchToMode('radio')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">📻</div>
                <h3 style="color: #3b82ff; margin-bottom: 0.5rem;">Radio Mode</h3>
                <p style="color: #888; font-size: 0.9rem;">Smart shuffle & playlists</p>
            </div>
            
            <!-- Analytics -->
            <div class="launcher-tile" onclick="switchToMode('analytics')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">📊</div>
                <h3 style="color: #fbbf24; margin-bottom: 0.5rem;">Analytics</h3>
                <p style="color: #888; font-size: 0.9rem;">Listening insights</p>
            </div>
            
            <!-- Settings -->
            <div class="launcher-tile" onclick="switchToMode('settings')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">⚙️</div>
                <h3 style="color: #a855f7; margin-bottom: 0.5rem;">Settings</h3>
                <p style="color: #888; font-size: 0.9rem;">Themes & preferences</p>
            </div>
            
            <!-- Import/Export -->
            <div class="launcher-tile" onclick="switchToMode('backup')">
                <div style="font-size: 4rem; margin-bottom: 1rem;">💾</div>
                <h3 style="color: #10b981; margin-bottom: 0.5rem;">Backup</h3>
                <p style="color: #888; font-size: 0.9rem;">Import & export data</p>
            </div>
        </div>
        
        <div style="margin-top: 3rem; text-align: center;">
            <p style="color: #666;">Total Tracks: <span style="color: var(--text-primary); font-weight: bold;" id="launcherTrackCount">0</span> | 
               Categories: <span style="color: #ff3b3b; font-weight: bold;" id="launcherCategoryCount">0</span> |
               Mode: <span style="color: #3b82ff; font-weight: bold;" id="launcherMode">Public</span>
            </p>
        </div>
    </div>
    
    <!-- Original Music Player Interface (hidden by default) -->
    <div id="musicPlayerMode" style="display: none;">
    
    <button onclick="switchToMode('launcher')" style="position: fixed; top: 20px; left: 20px; background: rgba(0,0,0,0.8); color: var(--text-primary); border: 2px solid #00ff66; padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); cursor: pointer; z-index: 1000; font-size: 1rem;">
        ← Back to Launcher
    </button>
    
    <div class="hero-section" id="heroSection" style="display: none;">
        <h1 class="hero-title">🔥 THE VAULT 🔒</h1>
        <p class="hero-subtitle">Your Ad-Free Music Terminal</p>
        <p style="color: #888; margin-bottom: 2rem;">Stream unlimited music. No ads. No tracking. Just vibes.</p>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number" id="totalTracks">0</div>
                <div class="stat-label">🎵 Total Tracks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalCategories">4</div>
                <div class="stat-label">🗂️ Categories</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">∞</div>
                <div class="stat-label">✅ No Ads</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">🔐 Private</div>
            </div>
        </div>
    </div>
    
    <div class="header-section" id="publicInfo">
        <h2>🎵 How It Works</h2>
        <p><strong>1. Add Music:</strong> Paste any YouTube URL or video ID</p>
        <p><strong>2. Organize:</strong> Categorize your tracks (Hip-Hop, Rock, etc.)</p>
        <p><strong>3. Save Forever:</strong> Export your collection anytime</p>
        <div class="feature-list">
            <span class="feature-badge">✓ No Ads</span>
            <span class="feature-badge">✓ No Tracking</span>
            <span class="feature-badge">✓ LocalStorage</span>
            <span class="feature-badge">✓ Categories</span>
            <span class="feature-badge">✓ Private Mode</span>
        </div>
    </div>
    
    <div class="categories-section">
        <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
            <h3 style="margin: 0;">📁 Categories</h3>
            <input type="text" id="searchInput" placeholder="🔍 Search videos..." style="flex: 1; max-width: 300px; margin: 0;" onkeyup="searchVideos()">
            <div class="view-toggle">
                <button id="gridViewBtn" class="active" onclick="setViewMode('grid')">⊞ Grid</button>
                <button id="listViewBtn" onclick="setViewMode('list')">☰ List</button>
            </div>
        </div>
        <div class="category-pills" id="categoryPills" style="margin-top: 1rem;">
            <div class="category-pill active" data-category="all">All</div>
            <div class="category-pill" data-category="hip-hop">Hip Hop</div>
            <div class="category-pill" data-category="rock">Rock</div>
            <div class="category-pill" data-category="electronic">Electronic</div>
            <div class="category-pill" data-category="chill">Chill</div>
            <button class="category-pill" onclick="addNewCategory()" style="background: #444;">+ Add Category</button>
        </div>
    </div>
    
    <div class="playback-controls">
        <div class="now-playing">
            <span id="nowPlayingText">Launch the player to auto-play your collection</span>
        </div>
        <button class="control-button" onclick="openPlayer('all')" style="background: #ff3b3b; border-color: #ff3b3b;">
            🚀 Open Auto-Player (All Videos)
        </button>
        <button class="control-button" onclick="openCurrentCategoryPlayer()">
            ▶️ Play Current Category Only
        </button>
    </div>
    
    <div class="input-section">
        <h3>🎧 Add Your Own Track</h3>
        <input type="text" id="videoInput" placeholder="Paste YouTube URL or video ID">
        <button onclick="loadVideo()" style="margin-left: 0.5rem;">➕ Add Song</button>
        <div class="button-group">
            <button onclick="saveCollection()">💾 Save Collection</button>
            <button onclick="loadCollection()">📂 Load Collection</button>
            <button onclick="importPlaylist()">📋 Import Playlist</button>
            <button onclick="clearSession()">🗑️ Clear Session</button>
        </div>
    </div>
    
    <div id="session-videos" class="video-grid"></div>
    
    </div> <!-- End musicPlayerMode -->
    
    <!-- Podcast Mode -->
    <div id="podcastMode" style="display: none; padding: 2rem; min-height: 100vh;">
        <button onclick="switchToMode('launcher')" style="position: fixed; top: 20px; left: 20px; background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-primary); padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); cursor: pointer; z-index: 1000; font-size: 1rem;">
            ← Back to Launcher
        </button>
        
        <div style="max-width: 1400px; margin: 0 auto; padding-top: 80px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 2rem; text-align: center;">🎙️ Podcast Player</h1>
            
            <!-- Add Podcast Section -->
            <div style="background: var(--bg-secondary); padding: 2rem; border-radius: var(--border-radius, 15px); margin-bottom: 3rem; border: 2px solid var(--border-secondary);">
                <h2 style="color: #ff3b3b; margin-bottom: 1.5rem;">Add Podcast</h2>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <input type="text" id="podcastInput" placeholder="Enter podcast RSS feed URL or YouTube playlist URL" 
                        style="flex: 1; min-width: 300px; padding: 1rem; background: var(--bg-primary); color: var(--text-primary); border: 2px solid var(--border-secondary); border-radius: var(--border-radius, 8px); font-size: 1rem;">
                    <button onclick="addPodcast()" 
                        style="background: linear-gradient(135deg, #ff3b3b, #ff6b6b); color: white; border: none; padding: 1rem 2rem; border-radius: var(--border-radius, 8px); cursor: pointer; font-size: 1rem; font-weight: bold;">
                        + Add Podcast
                    </button>
                </div>
                <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button onclick="addPopularPodcast('JRE')" class="podcast-quick-add">+ Joe Rogan Experience</button>
                    <button onclick="addPopularPodcast('Flagrant')" class="podcast-quick-add">+ Flagrant</button>
                    <button onclick="addPopularPodcast('ThisPastWeekend')" class="podcast-quick-add">+ This Past Weekend</button>
                    <button onclick="addPopularPodcast('Impaulsive')" class="podcast-quick-add">+ Impaulsive</button>
                </div>
            </div>
            
            <!-- Podcast List -->
            <div id="podcastList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem;">
                <!-- Podcasts will be dynamically added here -->
            </div>
        </div>
    </div>
    
    <!-- Radio Mode -->
    <div id="radioMode" style="display: none; padding: 2rem; min-height: 100vh;">
        <button onclick="switchToMode('launcher')" style="position: fixed; top: 20px; left: 20px; background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-primary); padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); cursor: pointer; z-index: 1000; font-size: 1rem;">
            ← Back to Launcher
        </button>
        
        <div style="max-width: 1400px; margin: 0 auto; padding-top: 80px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 2rem; text-align: center;">📻 Radio Mode</h1>
            
            <!-- Station Categories -->
            <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; margin-bottom: 3rem;">
                <button onclick="loadRadioCategory('hiphop')" class="radio-category-btn" style="background: linear-gradient(135deg, #ff0066, #ff3366);">Hip Hop</button>
                <button onclick="loadRadioCategory('electronic')" class="radio-category-btn" style="background: linear-gradient(135deg, #00ffff, #0099ff);">Electronic</button>
                <button onclick="loadRadioCategory('rock')" class="radio-category-btn" style="background: linear-gradient(135deg, #ff6600, #ff9900);">Rock</button>
                <button onclick="loadRadioCategory('chill')" class="radio-category-btn" style="background: linear-gradient(135deg, #9933ff, #cc66ff);">Chill</button>
                <button onclick="loadRadioCategory('live')" class="radio-category-btn" style="background: linear-gradient(135deg, #00ff66, #00cc99);">Live Radio</button>
            </div>
            
            <!-- Now Playing -->
            <div id="radioNowPlaying" style="background: var(--bg-secondary); padding: 2rem; border-radius: var(--border-radius, 15px); margin-bottom: 3rem; border: 2px solid var(--border-secondary); text-align: center; display: none;">
                <h3 style="color: #3b82ff; margin-bottom: 1rem;">Now Playing</h3>
                <div id="radioPlayerContainer"></div>
                <div style="margin-top: 1.5rem; display: flex; gap: 1rem; justify-content: center;">
                    <button onclick="previousStation()" class="radio-control-btn">⏮️ Previous</button>
                    <button onclick="toggleRadioPlay()" class="radio-control-btn" id="radioPlayPause">⏸️ Pause</button>
                    <button onclick="nextStation()" class="radio-control-btn">⏭️ Next</button>
                </div>
            </div>
            
            <!-- Station Grid -->
            <div id="radioStations" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                <!-- Radio stations will be dynamically added here -->
            </div>
        </div>
    </div>
    
    <!-- Settings Mode -->
    <div id="settingsMode" style="display: none; padding: 2rem; min-height: 100vh;">
        <button onclick="switchToMode('launcher')" style="position: fixed; top: 20px; left: 20px; background: var(--bg-secondary); color: var(--text-primary); border: 2px solid var(--border-primary); padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); cursor: pointer; z-index: 1000; font-size: 1rem;">
            ← Back to Launcher
        </button>
        
        <div style="max-width: 1400px; margin: 0 auto; padding-top: 80px;">
            <h1 style="font-size: 2.5rem; margin-bottom: 2rem; text-align: center;">⚙️ Settings</h1>
            
            <!-- Theme Selector Section -->
            <div style="background: var(--bg-secondary); border-radius: 16px; padding: 2rem; margin-bottom: 2rem;">
                <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--text-primary);">🎨 Choose Your Theme</h2>
                <p style="color: var(--text-tertiary); margin-bottom: 2rem;">Select from 40 unique themes, each with its own personality and visual style</p>
                
                <!-- Theme Search -->
                <input type="text" id="themeSearch" placeholder="Search themes..." style="width: 100%; padding: 0.75rem; margin-bottom: 2rem; background: var(--bg-tertiary); border: 1px solid var(--border-secondary); color: var(--text-primary); border-radius: var(--border-radius, 8px);">
                
                <!-- Theme Grid -->
                <div id="themeGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                    <!-- Themes will be dynamically added here -->
                </div>
            </div>
            
            <!-- Other Settings -->
            <div style="background: var(--bg-secondary); border-radius: 16px; padding: 2rem;">
                <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--text-primary);">🔧 Other Settings</h2>
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <label style="display: flex; align-items: center; gap: 1rem; cursor: pointer;">
                        <input type="checkbox" id="autoPlayToggle" style="width: 20px; height: 20px;">
                        <span style="color: var(--text-secondary);">Auto-play videos</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 1rem; cursor: pointer;">
                        <input type="checkbox" id="visualizerToggle" style="width: 20px; height: 20px;">
                        <span style="color: var(--text-secondary);">Enable visualizer by default</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 1rem; cursor: pointer;">
                        <input type="checkbox" id="reducedMotionToggle" style="width: 20px; height: 20px;">
                        <span style="color: var(--text-secondary);">Reduce motion (accessibility)</span>
                    </label>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        let vaultVideos = JSON.parse(localStorage.getItem('vaultVideos') || '[]');
        let vaultCategories = JSON.parse(localStorage.getItem('vaultCategories') || '["Hip Hop", "Rock", "Electronic", "Chill", "Podcast 🎙️"]');
        let currentCategory = 'all';
        let privateMode = JSON.parse(localStorage.getItem('privateMode') || 'false');
        let viewMode = localStorage.getItem('viewMode') || 'grid';
        let currentAppMode = 'launcher';
        let currentTheme = localStorage.getItem('vaultTheme') || 'default';
        
        // Auto-compact when memory usage is high
        function checkMemoryAndCompact() {
            const storageSize = new Blob([JSON.stringify(localStorage)]).size;
            const maxSize = 5 * 1024 * 1024; // 5MB threshold
            const warningSize = 4 * 1024 * 1024; // 4MB warning
            
            if (storageSize > maxSize) {
                performAutoCompact();
            } else if (storageSize > warningSize) {
                const sizeInMB = Math.round(storageSize / 1024 / 1024 * 100) / 100;
                showToast(`⚠️ Storage at ${sizeInMB}MB - consider cleaning up`);
            }
        }
        
        function performAutoCompact() {
            // Remove old watch progress data
            vaultVideos.forEach(video => {
                if (video.watchProgress && video.watchProgress > 0.95) {
                    delete video.watchProgress;
                }
            });
            
            // Remove duplicate videos
            const uniqueVideos = [];
            const seenIds = new Set();
            vaultVideos.forEach(video => {
                if (!seenIds.has(video.id)) {
                    seenIds.add(video.id);
                    uniqueVideos.push(video);
                }
            });
            vaultVideos = uniqueVideos;
            
            // Save compacted data
            localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
            showToast('🧹 Memory auto-compacted!');
        }
        
        // Theme definitions
        const themes = [
            { id: 'default', name: 'Cyberpunk Matrix', emoji: '💻', colors: ['#000000', '#00ff41'], description: 'Neo-Tokyo underground hacker aesthetic' },
            { id: 'synthwave', name: 'Synthwave Sunset', emoji: '🌅', colors: ['#1a0033', '#ff0080', '#00ffff'], description: '80s Miami Vice meets Tron' },
            { id: 'lofi', name: 'Lofi Study Room', emoji: '☕', colors: ['#f5e6d3', '#8b6f47'], description: 'Cozy anime-inspired study aesthetic' },
            { id: 'glass', name: 'Glassmorphism Pro', emoji: '🔮', colors: ['rgba(255,255,255,0.1)', '#b3e5fc'], description: 'Apple-inspired modern minimalism' },
            { id: 'ocean', name: 'Deep Ocean Abyss', emoji: '🌊', colors: ['#001f3f', '#00ffff'], description: 'Underwater bioluminescent theme' },
            { id: 'cosmic', name: 'Cosmic Nebula', emoji: '🌌', colors: ['#000014', '#6a0dad', '#ff1493'], description: 'Interstellar space station interface' },
            { id: 'steampunk', name: 'Steampunk Brass', emoji: '⚙️', colors: ['#3d2817', '#b87333', '#d4af37'], description: 'Victorian mechanical aesthetic' },
            { id: 'arctic', name: 'Arctic Aurora', emoji: '🎿', colors: ['#e6f3ff', '#7fff00', '#4dd0e1'], description: 'Northern lights over frozen tundra' },
            { id: 'tokyo', name: 'Tokyo Neon Night', emoji: '🗼', colors: ['#000000', '#ff0099', '#00ffff'], description: 'Shibuya crossing at midnight' },
            { id: 'desert', name: 'Desert Sandstorm', emoji: '🏜️', colors: ['#f4a460', '#ff8c00', '#1e90ff'], description: 'Sahara desert expedition interface' },
            { id: 'forest', name: 'Enchanted Forest', emoji: '🌲', colors: ['#013220', '#ffd700', '#8a9a5b'], description: 'Magical woodland fantasy' },
            { id: 'brutalist', name: 'Brutalist Concrete', emoji: '🏢', colors: ['#808080', '#ff4500', '#000000'], description: 'Raw architectural minimalism' },
            { id: 'vaporwave', name: 'Vaporwave Plaza', emoji: '🌴', colors: ['#ff69b4', '#40e0d0', '#9370db'], description: '90s mall aesthetic meets digital art' },
            { id: 'monochrome', name: 'Monochrome Ink', emoji: '⚫', colors: ['#ffffff', '#000000', '#808080'], description: 'High contrast newspaper print' },
            { id: 'sunset', name: 'Sunset Gradient', emoji: '🌇', colors: ['#ff7f50', '#ff1493', '#8a2be2'], description: 'California sunset vibes' },
            { id: 'quantum', name: 'Quantum Void', emoji: '⚛️', colors: ['#0a0a0a', '#0066cc', '#6600ff'], description: 'Quantum computer interface' },
            { id: 'tropical', name: 'Tropical Paradise', emoji: '🏝️', colors: ['#006994', '#228b22', '#ff7f50'], description: 'Caribbean beach resort' },
            { id: 'gothic', name: 'Gothic Cathedral', emoji: '🏰', colors: ['#1c1c1c', '#8b0000', '#ffd700'], description: 'Medieval gothic architecture' },
            { id: 'holographic', name: 'Holographic Future', emoji: '🔹', colors: ['#000000', '#00d4ff', '#ff00ff'], description: 'Blade Runner meets Ready Player One' },
            { id: 'zen', name: 'Zen Garden', emoji: '🎋', colors: ['#faf0e6', '#6b8e23', '#87ceeb'], description: 'Japanese minimalist tranquility' },
            { id: 'biomorphic', name: 'Biomorphic Flow', emoji: '🌸', colors: ['#fdf5e6', '#b8e6d0', '#ff9a8b'], description: 'Organic shapes inspired by Zaha Hadid' },
            { id: 'artdeco', name: 'Art Deco Metropolis', emoji: '🏛️', colors: ['#000000', '#d4af37', '#004225'], description: '1920s New York glamour' },
            { id: 'scandinavian', name: 'Scandinavian Frost', emoji: '❄️', colors: ['#ffffff', '#e6f3ff', '#36454f'], description: 'Nordic minimalism meets winter' },
            { id: 'biolab', name: 'Bioluminescent Lab', emoji: '🧪', colors: ['#fafafa', '#39ff14', '#ffbf00'], description: 'Scientific research facility' },
            { id: 'moroccan', name: 'Moroccan Nights', emoji: '🕌', colors: ['#3f51b5', '#cc5500', '#30d5c8'], description: 'Marrakech meets modern luxury' },
            { id: 'terminal', name: 'Retrowave Terminal', emoji: '💾', colors: ['#000000', '#41ff00', '#ffb000'], description: '1980s computer terminal nostalgia' },
            { id: 'swiss', name: 'Swiss Design Grid', emoji: '🇨🇭', colors: ['#ffffff', '#ff0000', '#000000'], description: 'International typographic style' },
            { id: 'celestial', name: 'Celestial Observatory', emoji: '🔭', colors: ['#191970', '#ffd700', '#8b008b'], description: 'Ancient astronomy meets modern space' },
            { id: 'memphis', name: 'Memphis Milano', emoji: '🔺', colors: ['#ffffff', '#ffff00', '#0000ff'], description: '1980s Italian design movement' },
            { id: 'industrial', name: 'Industrial Loft', emoji: '🏭', colors: ['#2c2c2c', '#8b4513', '#ffa500'], description: 'Converted warehouse chic' },
            { id: 'persian', name: 'Persian Tapestry', emoji: '🕌', colors: ['#6a0dad', '#0f52ba', '#ffd700'], description: 'Ancient Persian luxury' },
            { id: 'bauhaus', name: 'Bauhaus Primary', emoji: '🟥', colors: ['#ffffff', '#ff0000', '#0000ff'], description: 'Bauhaus school design principles' },
            { id: 'noir', name: 'Noir Detective', emoji: '🕵️', colors: ['#0a0a0a', '#8b0000', '#b87333'], description: '1940s film noir aesthetic' },
            { id: 'terrazzo', name: 'Terrazzo Modern', emoji: '🎨', colors: ['#fffdd0', '#ffc0cb', '#9caf88'], description: 'Contemporary Italian flooring art' },
            { id: 'kinetic', name: 'Kinetic Energy', emoji: '⚡', colors: ['#000000', '#ccff00', '#ff0066'], description: 'Motion design and energy visualization' },
            { id: 'blueprint', name: 'Architectural Blueprint', emoji: '📐', colors: ['#0047ab', '#ffffff', '#ffeb3b'], description: 'Technical drawing aesthetic' },
            { id: 'volcanic', name: 'Volcanic Forge', emoji: '🌋', colors: ['#0a0a0a', '#ff4500', '#cf1020'], description: 'Elemental fire and metalwork' },
            { id: 'pastel', name: 'Pastel Dream', emoji: '🌈', colors: ['#ffeeff', '#e6e6fa', '#ffdab9'], description: 'Soft, dreamy cloudscape' },
            { id: 'chromatic', name: 'Chromatic Spectrum', emoji: '🎯', colors: ['#000000', '#ff0000', '#00ff00'], description: 'Color theory exploration' },
            { id: 'shadow', name: 'Minimalist Shadow', emoji: '🔲', colors: ['#ffffff', '#f5f5f5', '#1a1a1a'], description: 'Extreme minimalism with depth' }
        ];
        
        function switchToMode(mode) {
            // Hide all modes
            document.getElementById('appLauncher').style.display = 'none';
            document.getElementById('musicPlayerMode').style.display = 'none';
            document.getElementById('podcastMode').style.display = 'none';
            document.getElementById('radioMode').style.display = 'none';
            document.getElementById('settingsMode').style.display = 'none';
            
            switch(mode) {
                case 'music':
                    document.getElementById('musicPlayerMode').style.display = 'block';
                    document.getElementById('heroSection').style.display = privateMode ? 'none' : 'block';
                    document.getElementById('publicInfo').style.display = privateMode ? 'none' : 'block';
                    currentAppMode = 'music';
                    refreshVaultVideos();
                    updateStats();
                    break;
                case 'podcast':
                    document.getElementById('podcastMode').style.display = 'block';
                    currentAppMode = 'podcast';
                    loadPodcastMode();
                    break;
                case 'radio':
                    document.getElementById('radioMode').style.display = 'block';
                    currentAppMode = 'radio';
                    loadRadioMode();
                    break;
                case 'analytics':
                    showToast('📊 Analytics coming soon!');
                    break;
                case 'settings':
                    document.getElementById('settingsMode').style.display = 'block';
                    currentAppMode = 'settings';
                    loadThemeGrid();
                    loadSettings();
                    break;
                case 'backup':
                    // Use existing backup functionality
                    saveCollection();
                    break;
                default:
                    document.getElementById('appLauncher').style.display = 'flex';
                    currentAppMode = 'launcher';
                    updateLauncherStats();
            }
        }
        
        function updateLauncherStats() {
            document.getElementById('launcherTrackCount').textContent = vaultVideos.length;
            document.getElementById('launcherCategoryCount').textContent = vaultCategories.length;
            document.getElementById('launcherMode').textContent = privateMode ? 'Private' : 'Public';
        }
        
        // Podcast Mode Functions
        function loadPodcastMode() {
            const podcastVideos = vaultVideos.filter(v => v.category === 'Podcast 🎙️');
            const continueListening = podcastVideos.filter(v => v.watchProgress && v.watchProgress > 0 && v.watchProgress < 0.95);
            const podcastList = document.getElementById('podcastList');
            
            podcastList.innerHTML = '';
            
            // Continue Listening Section
            if (continueListening.length > 0) {
                const continueSection = document.createElement('div');
                continueSection.className = 'continue-section';
                continueSection.style.gridColumn = '1 / -1';
                continueSection.innerHTML = `
                    <h2 style="color: #ff3b3b; margin-bottom: 1rem;">🎧 Continue Listening</h2>
                    <div style="display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 0.5rem;">
                        ${continueListening.map(video => `
                            <div class="continue-card" onclick="playPodcastEpisode('${video.id}')" style="min-width: 300px;">
                                <img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" 
                                     style="width: 80px; height: 60px; object-fit: cover; border-radius: 8px;">
                                <div style="flex: 1;">
                                    <h4 style="margin: 0; color: var(--text-primary); font-size: 0.9rem;">${video.title}</h4>
                                    <p style="margin: 0.2rem 0 0 0; color: var(--text-secondary); font-size: 0.8rem;">
                                        ${Math.floor(video.watchProgress * 100)}% complete
                                    </p>
                                </div>
                                <div class="continue-progress" style="width: ${video.watchProgress * 100}%;"></div>
                            </div>
                        `).join('')}
                    </div>
                `;
                podcastList.appendChild(continueSection);
            }
            
            // All Podcast Episodes
            podcastVideos.forEach(video => {
                const card = document.createElement('div');
                card.className = 'podcast-card';
                card.innerHTML = `
                    <div style="position: relative;">
                        <img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" 
                             style="width: 100%; height: 180px; object-fit: cover; border-radius: 10px; margin-bottom: 1rem;">
                        <span class="episode-duration">${video.duration || '00:00'}</span>
                        ${video.downloadStatus === 'complete' ? '<div class="download-status downloaded">⬇️</div>' : ''}
                        ${video.downloadStatus === 'downloading' ? '<div class="download-status downloading">⏳</div>' : ''}
                    </div>
                    <h3 style="color: var(--text-primary); margin-bottom: 0.5rem; font-size: 1.1rem;">${video.title}</h3>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem;">
                        Added ${new Date(video.addedDate).toLocaleDateString()}
                    </p>
                    <div style="display: flex; gap: 0.5rem;">
                        <button onclick="playPodcastEpisode('${video.id}')" 
                                style="flex: 1; background: #ff3b3b; color: white; border: none; padding: 0.5rem; border-radius: 6px; cursor: pointer;">
                            ▶️ Play
                        </button>
                        <button onclick="downloadPodcast('${video.id}')" 
                                style="background: var(--bg-primary); color: var(--text-primary); border: 2px solid var(--border-secondary); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer;">
                            ⬇️
                        </button>
                    </div>
                    ${video.watchProgress ? `<div class="podcast-progress" style="width: ${video.watchProgress * 100}%;"></div>` : ''}
                `;
                podcastList.appendChild(card);
            });
            
            // If no podcasts
            if (podcastVideos.length === 0) {
                podcastList.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                        <p style="color: var(--text-secondary); font-size: 1.2rem;">No podcasts yet. Add some using the buttons above!</p>
                    </div>
                `;
            }
        }
        
        function addPodcast() {
            const input = document.getElementById('podcastInput');
            const url = input.value.trim();
            if (!url) return;
            
            // Extract video ID same as loadVideo
            const videoIdMatch = url.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);
            if (videoIdMatch) {
                const videoId = videoIdMatch[1];
                const title = prompt('Enter podcast episode title:') || 'Podcast Episode';
                
                const video = {
                    id: videoId,
                    title: title,
                    category: 'Podcast 🎙️',
                    isPrivate: false,
                    addedDate: Date.now(),
                    watchProgress: 0,
                    downloadStatus: 'none'
                };
                
                vaultVideos.push(video);
                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                input.value = '';
                loadPodcastMode();
                showToast('🎙️ Podcast episode added!');
            }
        }
        
        async function addPopularPodcast(channel) {
            const channels = {
                'JRE': 'UCzQUP1qoWDoEbmsQxvdjxgQ',
                'Flagrant': 'UCxhkJEiGtm9X-Qn4qNh8m_Q',
                'ThisPastWeekend': 'UCLyPL-Ev7qtUF4kTBqNQAKQ',
                'Impaulsive': 'UCGeBogGDZ9W3dsGx-mWQGJA'
            };
            
            showToast(`🎙️ Loading ${channel} episodes...`);
            
            try {
                const response = await fetch(`/api/youtube/channel/${channels[channel]}`);
                const data = await response.json();
                
                if (data.items && data.items.length > 0) {
                    // Add first 5 episodes
                    const episodes = data.items.slice(0, 5);
                    episodes.forEach(item => {
                        const video = {
                            id: item.id.videoId,
                            title: item.snippet.title,
                            category: 'Podcast 🎙️',
                            isPrivate: false,
                            addedDate: Date.now(),
                            watchProgress: 0,
                            downloadStatus: 'none',
                            channelTitle: item.snippet.channelTitle
                        };
                        
                        // Check if not already added
                        if (!vaultVideos.find(v => v.id === video.id)) {
                            vaultVideos.push(video);
                        }
                    });
                    
                    localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                    loadPodcastMode();
                    showToast(`✅ Added ${episodes.length} ${channel} episodes!`);
                } else {
                    showToast('❌ No episodes found');
                }
            } catch (error) {
                console.error('Error fetching channel:', error);
                showToast('❌ Failed to load episodes');
            }
        }
        
        function playPodcastEpisode(videoId) {
            // Open in player with timestamp if has progress
            const video = vaultVideos.find(v => v.id === videoId);
            const startTime = video && video.watchProgress ? Math.floor(video.watchProgress * 100) : 0;
            
            window.open(`player.html?ids=${videoId}&start=${startTime}`, 'vaultPlayer', 
                'width=800,height=600,toolbar=no,location=no,status=no,menubar=no');
        }
        
        async function downloadPodcast(videoId) {
            const video = vaultVideos.find(v => v.id === videoId);
            if (video) {
                video.downloadStatus = 'downloading';
                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                loadPodcastMode();
                
                try {
                    const response = await fetch('/api/download', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ videoId })
                    });
                    
                    if (response.ok) {
                        const blob = await response.blob();
                        const url = window.URL.createObjectURL(blob);
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `${video.title}.mp3`;
                        document.body.appendChild(a);
                        a.click();
                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(a);
                        
                        video.downloadStatus = 'complete';
                        localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                        loadPodcastMode();
                        showToast('⬇️ Episode downloaded!');
                    } else {
                        throw new Error('Download failed');
                    }
                } catch (error) {
                    console.error('Download error:', error);
                    video.downloadStatus = 'none';
                    localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                    loadPodcastMode();
                    showToast('❌ Download failed');
                }
            }
        }
        
        // Radio Mode Functions
        let currentRadioCategory = 'all';
        let radioStations = [];
        let currentStationIndex = 0;
        let radioPlayer = null;
        
        function loadRadioMode() {
            loadRadioCategory('all');
        }
        
        function loadRadioCategory(category) {
            currentRadioCategory = category;
            const stationsContainer = document.getElementById('radioStations');
            stationsContainer.innerHTML = '';
            
            if (category === 'live') {
                // Live radio stations
                const liveStations = [
                    { name: 'Lofi Girl - Beats to Study/Relax', id: 'jfKfPfyJRdk', type: 'live' },
                    { name: 'Lofi Girl - Sleep/Chill Beats', id: 'rUxyKA_-grg', type: 'live' },
                    { name: 'Coffee Shop Radio ☕ 24/7', id: '-5KAN9_CzSA', type: 'live' },
                    { name: 'The Good Life Radio • 24/7', id: '36YnV9STBqc', type: 'live' },
                    { name: 'Chillhop Radio - Jazzy & Lofi', id: '5yx6BWlEVcY', type: 'live' },
                    { name: 'lofi hip hop radio 📚', id: 'lTRiuFIWV54', type: 'live' }
                ];
                
                liveStations.forEach(station => {
                    const stationEl = document.createElement('div');
                    stationEl.className = 'radio-station';
                    stationEl.innerHTML = `
                        <h3 style="color: var(--text-primary); margin-bottom: 0.5rem;">${station.name}</h3>
                        <p style="color: #00ff00; font-size: 0.9rem; margin-bottom: 1rem;">🔴 LIVE</p>
                        <button onclick="playRadioStation('${station.id}', '${station.name}')" 
                                style="background: #3b82ff; color: white; border: none; padding: 0.8rem 2rem; border-radius: 20px; cursor: pointer; font-weight: bold;">
                            ▶️ Tune In
                        </button>
                    `;
                    stationsContainer.appendChild(stationEl);
                });
            } else {
                // Create stations from your collection
                const categoryVideos = category === 'all' ? vaultVideos : 
                    vaultVideos.filter(v => v.category.toLowerCase().includes(category));
                
                if (categoryVideos.length > 0) {
                    radioStations = [...categoryVideos].sort(() => Math.random() - 0.5);
                    
                    const stationEl = document.createElement('div');
                    stationEl.className = 'radio-station';
                    stationEl.style.gridColumn = '1 / -1';
                    stationEl.innerHTML = `
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">
                            📻 ${category === 'all' ? 'All Music' : category.charAt(0).toUpperCase() + category.slice(1)} Radio
                        </h3>
                        <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">
                            ${categoryVideos.length} tracks • Shuffled playlist
                        </p>
                        <div class="radio-visualizer">
                            ${Array(20).fill(0).map((_, i) => 
                                `<div class="radio-bar" style="--i: ${i}; --height: ${Math.random() * 60 + 20}%;"></div>`
                            ).join('')}
                        </div>
                        <button onclick="startRadioStation()" 
                                style="background: linear-gradient(135deg, #3b82ff, #00ffff); color: white; border: none; padding: 1rem 3rem; border-radius: 30px; cursor: pointer; font-weight: bold; font-size: 1.2rem; margin-top: 1.5rem;">
                            ▶️ Start Radio
                        </button>
                    `;
                    stationsContainer.appendChild(stationEl);
                } else {
                    stationsContainer.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
                            <p style="color: var(--text-secondary); font-size: 1.2rem;">
                                No tracks in this category. Add some music first!
                            </p>
                        </div>
                    `;
                }
            }
        }
        
        function playRadioStation(videoId, name) {
            document.getElementById('radioNowPlaying').style.display = 'block';
            document.getElementById('radioPlayerContainer').innerHTML = `
                <iframe width="100%" height="200" 
                    src="https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&controls=1" 
                    frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
                </iframe>
                <h3 style="margin-top: 1rem; color: var(--text-primary);">${name}</h3>
            `;
        }
        
        function startRadioStation() {
            if (radioStations.length === 0) return;
            
            currentStationIndex = 0;
            const videoIds = radioStations.map(v => v.id).join(',');
            
            window.open(`player.html?ids=${videoIds}&shuffle=true&autoplay=true`, 'radioPlayer', 
                'width=800,height=600,toolbar=no,location=no,status=no,menubar=no');
            
            document.getElementById('radioNowPlaying').style.display = 'block';
            updateRadioNowPlaying();
        }
        
        function updateRadioNowPlaying() {
            if (radioStations.length === 0) return;
            
            const current = radioStations[currentStationIndex];
            document.getElementById('radioPlayerContainer').innerHTML = `
                <h3 style="color: var(--text-primary);">Now Playing: ${current.title}</h3>
                <p style="color: var(--text-secondary); margin-top: 0.5rem;">
                    Track ${currentStationIndex + 1} of ${radioStations.length}
                </p>
            `;
        }
        
        function previousStation() {
            if (currentStationIndex > 0) {
                currentStationIndex--;
                updateRadioNowPlaying();
            }
        }
        
        function nextStation() {
            if (currentStationIndex < radioStations.length - 1) {
                currentStationIndex++;
                updateRadioNowPlaying();
            }
        }
        
        function toggleRadioPlay() {
            const btn = document.getElementById('radioPlayPause');
            if (btn.textContent.includes('Pause')) {
                btn.textContent = '▶️ Play';
            } else {
                btn.textContent = '⏸️ Pause';
            }
        }
        
        function showToast(message, type = 'success') {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.background = type === 'success' ? '#00ff66' : '#ff3b3b';
            toast.style.color = type === 'success' ? '#121212' : '#fff';
            toast.innerHTML = `${type === 'success' ? '✓' : '✕'} ${message}`;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 10);
            
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
        
        function initializeDefaultVideos() {
            const defaultVideos = [
                { id: 'ALimx-H8C6s', title: 'NBA YoungBoy - House Arrest Tingz', category: 'Hip Hop', isPrivate: false },
                { id: '4dFTqJ9aUiQ', title: 'NBA YoungBoy - KickerBoxer', category: 'Hip Hop', isPrivate: false },
                { id: 'tDPoVpDdewg', title: 'Lil Keed - Mind Games', category: 'Hip Hop', isPrivate: false }
            ];
            
            // Only add defaults if vault is empty
            if (vaultVideos.length === 0) {
                defaultVideos.forEach(video => {
                    video.addedDate = Date.now();
                    vaultVideos.push(video);
                });
                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
            }
        }
        
        function updateStats() {
            document.getElementById('totalTracks').textContent = vaultVideos.length;
            document.getElementById('totalCategories').textContent = vaultCategories.length;
        }
        
        function loadVideo() {
            const input = document.getElementById('videoInput').value.trim();
            if (!input) return;
            
            const match = input.match(/(?:v=|\/)([0-9A-Za-z_-]{11})/);
            const videoId = match ? match[1] : input;
            
            const title = prompt('Enter a title for this track:') || 'Custom Track';
            const category = prompt(`Enter category (${vaultCategories.join(', ')}):`) || 'Uncategorized';
            const isPrivate = privateMode || confirm('Mark this video as private? (only visible in private mode)');
            
            const video = { 
                id: videoId, 
                title: title,
                category: category,
                addedDate: Date.now(),
                isPrivate: isPrivate
            };
            
            vaultVideos.push(video);
            localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
            
            if (!vaultCategories.includes(category) && category !== 'Uncategorized') {
                vaultCategories.push(category);
                localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                updateCategoryPills();
            }
            
            addVideoToDOM(video);
            document.getElementById('videoInput').value = '';
            updateStats();
            showToast(`Added "${title}" to your vault!`);
        }
        
        function addVideoToDOM(video) {
            // Normalize category names for comparison
            const normalizedVideoCategory = video.category.toLowerCase().replace(/\s+/g, '-');
            const normalizedCurrentCategory = currentCategory.toLowerCase();
            
            if (normalizedCurrentCategory !== 'all' && normalizedVideoCategory !== normalizedCurrentCategory) return;
            if (!privateMode && video.isPrivate) return;
            
            const container = document.createElement('div');
            container.className = 'video-container';
            container.setAttribute('data-category', video.category);
            container.style.position = 'relative';
            container.innerHTML = `
                <button class="delete-btn" onclick="event.stopPropagation(); deleteVideo('${video.id}')" title="Delete video">×</button>
                <img class="video-thumbnail thumbnail-loading" src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${video.title}" loading="lazy" onload="this.classList.remove('thumbnail-loading')" onerror="this.classList.remove('thumbnail-loading')">
                <div class="video-info">
                    <div class="video-title">${video.title}</div>
                    <div class="video-category">${video.category} ${video.isPrivate ? '<span class="private-badge">PRIVATE</span>' : ''}</div>
                </div>
            `;
            container.onclick = () => playVideo(video.id);
            document.getElementById('session-videos').appendChild(container);
        }
        
        function saveCollection() {
            const data = JSON.stringify({
                videos: vaultVideos,
                categories: vaultCategories,
                exportDate: new Date().toISOString()
            }, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `vault-collection-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function loadCollection() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'application/json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(event) {
                    try {
                        const data = JSON.parse(event.target.result);
                        if (data.videos) {
                            vaultVideos = data.videos;
                            localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                        }
                        if (data.categories) {
                            vaultCategories = data.categories;
                            localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                            updateCategoryPills();
                        }
                        refreshVaultVideos();
                        updateStats();
                    } catch (err) {
                        alert('Invalid collection file');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }
        
        function clearSession() {
            if (confirm('Clear your entire vault? This cannot be undone!')) {
                vaultVideos = [];
                vaultCategories = ['Hip Hop', 'Rock', 'Electronic', 'Chill', 'Podcast 🎙️'];
                localStorage.removeItem('vaultVideos');
                localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                document.getElementById('session-videos').innerHTML = '';
                updateCategoryPills();
                updateStats();
            }
        }
        
        function importPlaylist() {
            const playlistUrl = prompt('Enter YouTube playlist URL:');
            if (!playlistUrl) return;
            
            // Extract playlist ID from URL
            const playlistMatch = playlistUrl.match(/[?&]list=([^&]+)/);
            if (!playlistMatch) {
                showToast('Invalid playlist URL', 'error');
                return;
            }
            
            const playlistId = playlistMatch[1];
            const category = prompt('Category for all playlist videos:', 'Playlist Import') || 'Playlist Import';
            
            // Show loading message
            showToast('Importing playlist... This may take a moment', 'success');
            
            // For demo purposes, we'll simulate importing a few videos
            // In a real implementation, you'd need YouTube API access
            const demoVideos = [
                { id: 'dQw4w9WgXcQ', title: 'Demo Video 1', category: category, isPrivate: false, addedDate: Date.now() },
                { id: 'kJQP7kiw5Fk', title: 'Demo Video 2', category: category, isPrivate: false, addedDate: Date.now() },
                { id: '3tmd-ClpJxA', title: 'Demo Video 3', category: category, isPrivate: false, addedDate: Date.now() }
            ];
            
            let imported = 0;
            demoVideos.forEach(video => {
                if (!vaultVideos.some(v => v.id === video.id)) {
                    vaultVideos.push(video);
                    imported++;
                }
            });
            
            if (!vaultCategories.includes(category)) {
                vaultCategories.push(category);
                localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                updateCategoryPills();
            }
            
            localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
            refreshVaultVideos();
            updateStats();
            
            showToast(`Imported ${imported} videos from playlist to "${category}"`, 'success');
        }
        
        function refreshVaultVideos() {
            document.getElementById('session-videos').innerHTML = '';
            const searchTerm = document.getElementById('searchInput')?.value?.toLowerCase() || '';
            
            vaultVideos.forEach(video => {
                if (searchTerm && !video.title.toLowerCase().includes(searchTerm) && 
                    !video.category.toLowerCase().includes(searchTerm)) {
                    return; // Skip videos that don't match search
                }
                addVideoToDOM(video);
            });
        }
        
        function searchVideos() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            refreshVaultVideos();
            
            if (searchTerm) {
                const visibleVideos = document.querySelectorAll('#session-videos .video-container').length;
                showToast(`Found ${visibleVideos} video${visibleVideos !== 1 ? 's' : ''} matching "${searchTerm}"`, 'success');
            }
        }
        
        function filterByCategory(category, element) {
            currentCategory = category;
            document.querySelectorAll('.category-pill').forEach(pill => {
                pill.classList.remove('active');
            });
            if (element) element.classList.add('active');
            refreshVaultVideos();
        }
        
        let currentlyPlaying = null;
        let visualizerActive = false;
        let animationId = null;
        
        function playVideo(videoId) {
            // Remove any existing player
            const existingPlayer = document.getElementById('main-player');
            if (existingPlayer) {
                existingPlayer.remove();
            }
            
            // Create full-screen overlay player
            const playerOverlay = document.createElement('div');
            playerOverlay.id = 'main-player';
            playerOverlay.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: #000;
                z-index: 9999;
                padding: 0;
                margin: 0;
            `;
            
            // Find the video title
            const video = vaultVideos.find(v => v.id === videoId);
            const title = video ? video.title : 'Now Playing';
            
            playerOverlay.innerHTML = `
                <button onclick="closePlayer()" style="position: fixed; top: 20px; right: 20px; background: #ff3b3b; color: white; border: none; width: 60px; height: 60px; border-radius: 50%; cursor: pointer; font-size: 2rem; z-index: 10001; box-shadow: 0 4px 12px rgba(0,0,0,0.8);">✕</button>
                <button onclick="toggleVisualizer()" style="position: fixed; top: 20px; right: 100px; background: var(--accent-primary); color: #121212; border: none; padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); cursor: pointer; font-size: 1rem; z-index: 10001; box-shadow: 0 4px 12px rgba(0,0,0,0.8);">🎵 Visualizer</button>
                <div id="visualizerControls" style="position: fixed; top: 20px; left: 20px; z-index: 10001; display: none;">
                    <select onchange="switchVisualizerMode(this.value)" style="background: rgba(0,0,0,0.8); color: var(--text-primary); border: 2px solid #00ff66; padding: 0.8rem 1.5rem; border-radius: var(--border-radius, 8px); font-size: 1rem; cursor: pointer; box-shadow: 0 4px 12px rgba(0,255,102,0.3);">
                        <option value="bars">🎵 Frequency Bars</option>
                        <option value="wave">〰️ Waveform</option>
                        <option value="particles">✨ Particles</option>
                        <option value="sphere">🌐 3D Sphere</option>
                        <option value="kaleidoscope">🔮 Kaleidoscope</option>
                    </select>
                    <label style="color: var(--text-primary); margin-left: 1rem;">
                        <input type="checkbox" id="beatPulse" checked style="margin-right: 0.5rem;">
                        Beat Pulse
                    </label>
                </div>
                <canvas id="visualizer" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; display: none;"></canvas>
                <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background: #000; z-index: 2;" id="videoContainer">
                    <iframe src="https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&modestbranding=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen" allowfullscreen style="width: 100%; height: 100%; max-width: 100vw; max-height: 100vh;"></iframe>
                </div>
            `;
            
            document.body.appendChild(playerOverlay);
            document.body.style.overflow = 'hidden'; // Prevent scrolling
            
            currentlyPlaying = videoId;
            
            // Update playing indicator
            document.querySelectorAll('.video-container').forEach(container => {
                container.classList.remove('playing');
            });
            document.querySelectorAll('.video-container').forEach(container => {
                if (container.querySelector('img').src.includes(videoId)) {
                    container.classList.add('playing');
                }
            });
        }
        
        function closePlayer() {
            const player = document.getElementById('main-player');
            if (player) {
                player.remove();
                document.body.style.overflow = ''; // Restore scrolling
                currentlyPlaying = null;
                visualizerActive = false;
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
                document.querySelectorAll('.video-container').forEach(container => {
                    container.classList.remove('playing');
                });
            }
        }
        
        // Advanced Visualizer System
        let visualizerMode = 'bars'; // bars, wave, particles, sphere, kaleidoscope
        let audioContext = null;
        let analyser = null;
        let dataArray = null;
        let particles = [];
        
        function toggleVisualizer() {
            visualizerActive = !visualizerActive;
            const canvas = document.getElementById('visualizer');
            const videoContainer = document.getElementById('videoContainer');
            const controls = document.getElementById('visualizerControls');
            
            if (visualizerActive) {
                canvas.style.display = 'block';
                controls.style.display = 'block';
                videoContainer.style.opacity = '0.3';
                videoContainer.style.filter = 'blur(5px)';
                videoContainer.style.transition = 'all 0.5s ease';
                initAudioContext();
                initVisualizer();
                showToast('🎵 Visualizer ON - Try different modes!');
            } else {
                canvas.style.display = 'none';
                controls.style.display = 'none';
                videoContainer.style.opacity = '1';
                videoContainer.style.filter = 'none';
                if (animationId) {
                    cancelAnimationFrame(animationId);
                    animationId = null;
                }
            }
        }
        
        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256;
                const bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
                
                // Note: YouTube embeds don't allow audio access due to CORS
                // This creates simulated beat-synced data
                // For real audio: Use Web Audio API with local files or microphone input
            }
        }
        
        function switchVisualizerMode(mode) {
            visualizerMode = mode;
            particles = []; // Reset particles
            showToast(`Visualizer: ${mode.toUpperCase()} mode`);
        }
        
        function initVisualizer() {
            const canvas = document.getElementById('visualizer');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Dynamic resizing
            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });
            
            function drawVisualizer() {
                if (!visualizerActive) return;
                
                // Simulate audio data with more realistic beat patterns
                const time = Date.now() * 0.001;
                const beatFreq = 2; // 120 BPM
                const beat = Math.sin(time * beatFreq * Math.PI) > 0.8 ? 1 : 0;
                const subBeat = Math.sin(time * beatFreq * 4 * Math.PI) > 0.9 ? 0.5 : 0;
                
                for (let i = 0; i < dataArray.length; i++) {
                    // Create frequency bands with beat emphasis
                    if (i < 10) { // Bass frequencies
                        dataArray[i] = (beat * 200 + subBeat * 100 + Math.random() * 55) * (0.8 + Math.sin(time * 2 + i) * 0.2);
                    } else if (i < 50) { // Mid frequencies
                        dataArray[i] = (beat * 100 + Math.random() * 100) * (0.6 + Math.sin(time * 3 + i * 0.5) * 0.4);
                    } else { // High frequencies
                        dataArray[i] = Math.random() * 80 * (0.5 + Math.sin(time * 5 + i * 0.2) * 0.5);
                    }
                }
                
                // Simulate beat detection
                const beatPulse = document.getElementById('beatPulse');
                const bass = dataArray.slice(0, 10).reduce((a, b) => a + b) / 10 / 255;
                
                if (beatPulse && beatPulse.checked) {
                    if (bass > 0.7) {
                        canvas.style.boxShadow = `0 0 ${50 + bass * 50}px #00ff66, 0 0 ${100 + bass * 100}px #00ff66`;
                        videoContainer.style.filter = `blur(5px) brightness(${1 + bass * 0.3})`;
                    } else {
                        canvas.style.boxShadow = '0 0 20px rgba(0, 255, 102, 0.3)';
                        videoContainer.style.filter = 'blur(5px) brightness(1)';
                    }
                    canvas.style.transition = 'box-shadow 0.1s ease';
                    videoContainer.style.transition = 'filter 0.1s ease';
                }
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                switch (visualizerMode) {
                    case 'bars':
                        drawBars(ctx, canvas, dataArray);
                        break;
                    case 'wave':
                        drawWave(ctx, canvas, dataArray);
                        break;
                    case 'particles':
                        drawParticles(ctx, canvas, dataArray);
                        break;
                    case 'sphere':
                        drawSphere(ctx, canvas, dataArray);
                        break;
                    case 'kaleidoscope':
                        drawKaleidoscope(ctx, canvas, dataArray);
                        break;
                }
                
                animationId = requestAnimationFrame(drawVisualizer);
            }
            
            drawVisualizer();
        }
        
        function drawBars(ctx, canvas, dataArray) {
            const barCount = 64;
            const barWidth = canvas.width / barCount;
            
            for (let i = 0; i < barCount; i++) {
                const barHeight = (dataArray[Math.floor(i * dataArray.length / barCount)] / 255) * canvas.height * 0.8;
                
                // Create gradient with glow effect
                const gradient = ctx.createLinearGradient(0, canvas.height - barHeight, 0, canvas.height);
                const hue = (i / barCount) * 360;
                gradient.addColorStop(0, `hsla(${hue}, 100%, 60%, 0.8)`);
                gradient.addColorStop(0.5, `hsla(${hue}, 100%, 50%, 0.9)`);
                gradient.addColorStop(1, `hsla(${hue}, 100%, 40%, 1)`);
                
                // Add glow
                ctx.shadowColor = `hsl(${hue}, 100%, 50%)`;
                ctx.shadowBlur = 20;
                
                ctx.fillStyle = gradient;
                ctx.fillRect(i * barWidth, canvas.height - barHeight, barWidth - 2, barHeight);
            }
        }
        
        function drawWave(ctx, canvas, dataArray) {
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#00ff66';
            ctx.shadowColor = '#00ff66';
            ctx.shadowBlur = 20;
            
            ctx.beginPath();
            const sliceWidth = canvas.width / dataArray.length;
            let x = 0;
            
            for (let i = 0; i < dataArray.length; i++) {
                const v = dataArray[i] / 255;
                const y = v * canvas.height / 2 + canvas.height / 4;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                x += sliceWidth;
            }
            
            ctx.stroke();
            
            // Mirror wave
            ctx.strokeStyle = '#ff3b3b';
            ctx.shadowColor = '#ff3b3b';
            ctx.beginPath();
            x = 0;
            
            for (let i = 0; i < dataArray.length; i++) {
                const v = dataArray[i] / 255;
                const y = canvas.height - (v * canvas.height / 2 + canvas.height / 4);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                x += sliceWidth;
            }
            ctx.stroke();
        }
        
        function drawParticles(ctx, canvas, dataArray) {
            // Create new particles based on audio
            const bass = dataArray.slice(0, 10).reduce((a, b) => a + b) / 10 / 255;
            
            // Create particles on beat
            if (bass > 0.6 && particles.length < 1000) {
                const particleCount = Math.floor(bass * 20);
                for (let i = 0; i < particleCount; i++) {
                    const angle = (Math.random() * Math.PI * 2);
                    const speed = 5 + bass * 20;
                    particles.push({
                        x: canvas.width / 2,
                        y: canvas.height / 2,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        size: Math.random() * 10 + 5,
                        color: `hsl(${Math.random() * 360}, 100%, ${50 + bass * 30}%)`,
                        life: 1
                    });
                }
            }
            
            // Update and draw particles
            particles = particles.filter(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.5; // Gravity
                p.vx *= 0.99; // Friction
                p.life -= 0.02;
                p.size *= 0.97;
                
                ctx.save();
                ctx.globalAlpha = p.life;
                ctx.fillStyle = p.color;
                ctx.shadowColor = p.color;
                ctx.shadowBlur = 20 * p.life;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Add trail effect
                ctx.globalAlpha = p.life * 0.3;
                ctx.beginPath();
                ctx.moveTo(p.x, p.y);
                ctx.lineTo(p.x - p.vx * 2, p.y - p.vy * 2);
                ctx.strokeStyle = p.color;
                ctx.lineWidth = p.size * 0.5;
                ctx.stroke();
                
                ctx.restore();
                
                return p.life > 0 && p.size > 0.5 && p.x > -50 && p.x < canvas.width + 50 && p.y < canvas.height + 50;
            });
        }
        
        function drawSphere(ctx, canvas, dataArray) {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(canvas.width, canvas.height) * 0.3;
            
            ctx.save();
            ctx.translate(centerX, centerY);
            
            for (let i = 0; i < dataArray.length; i++) {
                const angle = (i / dataArray.length) * Math.PI * 2;
                const amp = dataArray[i] / 255;
                const r = radius + amp * 100;
                
                const x = Math.cos(angle) * r;
                const y = Math.sin(angle) * r;
                
                const gradient = ctx.createRadialGradient(x, y, 0, x, y, 20);
                gradient.addColorStop(0, `hsla(${i * 360 / dataArray.length}, 100%, 60%, 1)`);
                gradient.addColorStop(1, `hsla(${i * 360 / dataArray.length}, 100%, 30%, 0)`);
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(x, y, 5 + amp * 15, 0, Math.PI * 2);
                ctx.fill();
            }
            
            ctx.restore();
        }
        
        function drawKaleidoscope(ctx, canvas, dataArray) {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const sections = 6;
            
            ctx.save();
            ctx.translate(centerX, centerY);
            
            for (let s = 0; s < sections; s++) {
                ctx.save();
                ctx.rotate((Math.PI * 2 / sections) * s);
                
                for (let i = 0; i < dataArray.length / 4; i++) {
                    const angle = (i / (dataArray.length / 4)) * Math.PI / 3;
                    const amp = dataArray[i] / 255;
                    const r = 50 + i * 5 + amp * 50;
                    
                    const x = Math.cos(angle) * r;
                    const y = Math.sin(angle) * r;
                    
                    ctx.fillStyle = `hsla(${(s * 60 + i * 10) % 360}, 100%, 50%, ${amp})`;
                    ctx.fillRect(x, y, 5, 5);
                }
                
                ctx.restore();
            }
            
            ctx.restore();
        }
        
        function deleteVideo(videoId) {
            if (confirm('Are you sure you want to delete this video?')) {
                vaultVideos = vaultVideos.filter(v => v.id !== videoId);
                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                refreshVaultVideos();
                updateStats();
            }
        }
        
        function deleteCategory(categoryName) {
            const videosInCategory = vaultVideos.filter(v => v.category === categoryName).length;
            if (videosInCategory > 0) {
                if (!confirm(`This category contains ${videosInCategory} videos. Delete the category and all its videos?`)) {
                    return;
                }
                vaultVideos = vaultVideos.filter(v => v.category !== categoryName);
                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
            }
            
            vaultCategories = vaultCategories.filter(c => c !== categoryName);
            localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
            
            if (currentCategory === categoryName.toLowerCase().replace(/\s+/g, '-')) {
                currentCategory = 'all';
            }
            
            updateCategoryPills();
            refreshVaultVideos();
            updateStats();
            
            // Re-apply active class to "All" after updating pills
            document.querySelector('[data-category="all"]').classList.add('active');
        }
        
        function addNewCategory() {
            const newCategory = prompt('Enter new category name:');
            if (newCategory && !vaultCategories.includes(newCategory)) {
                vaultCategories.push(newCategory);
                localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                updateCategoryPills();
            }
        }
        
        function updateCategoryPills() {
            const container = document.getElementById('categoryPills');
            container.innerHTML = '<div class="category-pill active" data-category="all">All</div>';
            
            vaultCategories.forEach(cat => {
                const pill = document.createElement('div');
                pill.className = 'category-pill';
                pill.setAttribute('data-category', cat.toLowerCase().replace(/\s+/g, '-'));
                pill.innerHTML = `
                    ${cat}
                    <button class="category-delete" onclick="event.stopPropagation(); deleteCategory('${cat}')" title="Delete category">×</button>
                `;
                pill.onclick = function() { filterByCategory(cat.toLowerCase().replace(/\s+/g, '-'), this); };
                container.appendChild(pill);
            });
            
            const addButton = document.createElement('button');
            addButton.className = 'category-pill';
            addButton.style.background = '#444';
            addButton.textContent = '+ Add Category';
            addButton.onclick = addNewCategory;
            container.appendChild(addButton);
        }
        
        function toggleMode() {
            privateMode = !privateMode;
            localStorage.setItem('privateMode', JSON.stringify(privateMode));
            
            const toggle = document.getElementById('modeToggle');
            const publicInfo = document.getElementById('publicInfo');
            const heroSection = document.getElementById('heroSection');
            
            if (privateMode) {
                toggle.classList.add('active');
                publicInfo.style.display = 'none';
                heroSection.style.display = 'none';
            } else {
                toggle.classList.remove('active');
                publicInfo.style.display = 'block';
                heroSection.style.display = 'block';
            }
            
            refreshVaultVideos();
            updateStats();
        }
        
        function setViewMode(mode) {
            viewMode = mode;
            localStorage.setItem('viewMode', mode);
            
            const videosContainer = document.getElementById('session-videos');
            const gridBtn = document.getElementById('gridViewBtn');
            const listBtn = document.getElementById('listViewBtn');
            
            if (mode === 'grid') {
                videosContainer.className = 'video-grid';
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
            } else {
                videosContainer.className = 'video-list';
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
            }
            
            refreshVaultVideos();
        }

        // Drag and drop handlers
        function setupDragDrop() {
            const dropZone = document.getElementById('dropZone');
            let dragCounter = 0;
            
            document.addEventListener('dragenter', (e) => {
                e.preventDefault();
                dragCounter++;
                dropZone.classList.add('active');
            });
            
            document.addEventListener('dragleave', (e) => {
                e.preventDefault();
                dragCounter--;
                if (dragCounter === 0) {
                    dropZone.classList.remove('active');
                }
            });
            
            document.addEventListener('dragover', (e) => {
                e.preventDefault();
            });
            
            document.addEventListener('drop', (e) => {
                e.preventDefault();
                dragCounter = 0;
                dropZone.classList.remove('active');
                
                const files = Array.from(e.dataTransfer.files);
                const jsonFile = files.find(f => f.name.endsWith('.json'));
                
                if (jsonFile) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        try {
                            const data = JSON.parse(event.target.result);
                            
                            if (data.videos && Array.isArray(data.videos)) {
                                let imported = 0;
                                let duplicates = 0;
                                
                                data.videos.forEach(video => {
                                    if (!vaultVideos.some(v => v.id === video.id)) {
                                        vaultVideos.push(video);
                                        imported++;
                                    } else {
                                        duplicates++;
                                    }
                                });
                                
                                if (data.categories) {
                                    data.categories.forEach(cat => {
                                        if (!vaultCategories.includes(cat)) {
                                            vaultCategories.push(cat);
                                        }
                                    });
                                }
                                
                                localStorage.setItem('vaultVideos', JSON.stringify(vaultVideos));
                                localStorage.setItem('vaultCategories', JSON.stringify(vaultCategories));
                                updateCategoryPills();
                                refreshVaultVideos();
                                updateStats();
                                
                                let message = `Imported ${imported} new videos`;
                                if (duplicates > 0) {
                                    message += ` (${duplicates} duplicates skipped)`;
                                }
                                showToast(message);
                            } else {
                                showToast('Invalid collection file format', 'error');
                            }
                        } catch (err) {
                            showToast('Failed to read JSON file', 'error');
                        }
                    };
                    reader.readAsText(jsonFile);
                } else {
                    showToast('Please drop a JSON file', 'error');
                }
            });
        }

        window.onload = function() {
            initializeDefaultVideos();
            updateCategoryPills();
            
            if (privateMode) {
                document.getElementById('modeToggle').classList.add('active');
                document.getElementById('publicInfo').style.display = 'none';
                document.getElementById('heroSection').style.display = 'none';
            }
            
            // Apply saved view mode
            setViewMode(viewMode);
            
            // Show launcher by default
            updateLauncherStats();
            
            document.querySelector('[data-category="all"]').onclick = function() {
                filterByCategory('all', this);
            };
            
            // Setup drag and drop
            setupDragDrop();
        };
        
        // Player Control Functions
        function openPlayer(category) {
            const playerUrl = `/player.html?category=${category}`;
            window.open(playerUrl, '_blank', 'width=1200,height=800');
        }
        
        function openCurrentCategoryPlayer() {
            if (currentCategory === 'all') {
                showToast('⚠️ Please select a specific category first!');
                return;
            }
            openPlayer(currentCategory);
        }
        
        // Theme Loading System
        let themeIndex = null;
        let currentThemeData = null;
        
        async function loadThemeIndex() {
            try {
                const response = await fetch('/themes/themes.json');
                themeIndex = await response.json();
                return themeIndex;
            } catch (error) {
                console.error('Failed to load theme index:', error);
                return [];
            }
        }
        
        async function loadThemeFile(themeId) {
            try {
                // Get theme info from index
                const themeInfo = themeIndex.find(t => t.id === themeId);
                if (!themeInfo) {
                    console.error('Theme not found in index:', themeId);
                    return;
                }
                
                // Convert theme name to filename
                const filename = themeInfo.name.toLowerCase().replace(/ /g, '_').replace(/'/g, '') + '.json';
                const response = await fetch(`/themes/${filename}`);
                currentThemeData = await response.json();
                
                // Apply theme
                applyTheme(currentThemeData);
                
                // Save theme preference
                localStorage.setItem('selectedTheme', themeId);
                
                return currentThemeData;
            } catch (error) {
                console.error('Failed to load theme file:', error);
            }
        }
        
        function applyTheme(themeData) {
            // Apply CSS variables
            const root = document.documentElement;
            for (const [variable, value] of Object.entries(themeData.variables)) {
                root.style.setProperty(variable, value);
            }
            
            // Apply font import if needed
            if (themeData.fonts && themeData.fonts.import) {
                // Check if font import already exists
                let fontImportStyle = document.getElementById('theme-font-import');
                if (!fontImportStyle) {
                    fontImportStyle = document.createElement('style');
                    fontImportStyle.id = 'theme-font-import';
                    document.head.appendChild(fontImportStyle);
                }
                fontImportStyle.textContent = themeData.fonts.import;
            }
            
            // Update data-theme attribute for CSS selectors
            document.documentElement.setAttribute('data-theme', themeData.id);
            
            // Apply animation class if needed
            document.body.className = `theme-${themeData.id}`;
            
            showToast(`${themeData.emoji} Applied ${themeData.name} theme!`);
        }
        
        async function loadThemeGrid() {
            const grid = document.getElementById('themeGrid');
            grid.innerHTML = ''; // Clear existing
            
            // Load theme index if not already loaded
            if (!themeIndex) {
                themeIndex = await loadThemeIndex();
            }
            
            // Create theme cards
            themeIndex.forEach(theme => {
                const card = createThemeCard(theme);
                grid.appendChild(card);
            });
            
            // Filter functionality
            const searchInput = document.getElementById('themeSearch');
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase();
                const cards = grid.querySelectorAll('.theme-card');
                
                cards.forEach(card => {
                    const themeName = card.dataset.themeName.toLowerCase();
                    const themeTags = card.dataset.themeTags.toLowerCase();
                    const matches = themeName.includes(searchTerm) || themeTags.includes(searchTerm);
                    card.style.display = matches ? 'block' : 'none';
                });
            });
        }
        
        function createThemeCard(theme) {
            const card = document.createElement('div');
            card.className = 'theme-card';
            card.dataset.themeName = theme.name;
            card.dataset.themeTags = theme.tags.join(' ');
            card.style.cssText = `
                background: var(--bg-tertiary);
                border: 2px solid var(--border-secondary);
                border-radius: var(--border-radius, 12px);
                padding: 1.5rem;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: center;
                position: relative;
                overflow: hidden;
            `;
            
            // Color preview bar
            const colorBar = document.createElement('div');
            colorBar.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(to right, ${theme.preview.join(', ')});
            `;
            card.appendChild(colorBar);
            
            // Theme emoji
            const emoji = document.createElement('div');
            emoji.textContent = theme.emoji;
            emoji.style.cssText = 'font-size: 2rem; margin-bottom: 0.5rem;';
            card.appendChild(emoji);
            
            // Theme name
            const name = document.createElement('div');
            name.textContent = theme.name;
            name.style.cssText = 'font-weight: bold; margin-bottom: 0.25rem; color: var(--text-primary);';
            card.appendChild(name);
            
            // Theme description
            const desc = document.createElement('div');
            desc.textContent = theme.description;
            desc.style.cssText = 'font-size: 0.8rem; color: var(--text-tertiary);';
            card.appendChild(desc);
            
            // Hover effects
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-4px)';
                card.style.borderColor = 'var(--border-primary)';
                card.style.boxShadow = '0 8px 16px var(--shadow-primary)';
                
                // Preview on hover (optional)
                if (theme.preview && theme.preview.length > 0) {
                    colorBar.style.height = '8px';
                }
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0)';
                card.style.borderColor = 'var(--border-secondary)';
                card.style.boxShadow = 'none';
                colorBar.style.height = '4px';
            });
            
            // Click to apply theme
            card.addEventListener('click', () => {
                loadThemeFile(theme.id);
                
                // Update active state
                document.querySelectorAll('.theme-card').forEach(c => {
                    c.style.borderColor = 'var(--border-secondary)';
                });
                card.style.borderColor = 'var(--accent-primary)';
            });
            
            // Check if this is the current theme
            const savedTheme = localStorage.getItem('selectedTheme');
            if (savedTheme === theme.id || (!savedTheme && theme.id === 'default')) {
                card.style.borderColor = 'var(--accent-primary)';
            }
            
            return card;
        }
        
        function loadSettings() {
            // Load saved settings
            const autoPlay = localStorage.getItem('autoPlayVideos') === 'true';
            const visualizer = localStorage.getItem('enableVisualizer') === 'true';
            const reducedMotion = localStorage.getItem('reducedMotion') === 'true';
            
            document.getElementById('autoPlayToggle').checked = autoPlay;
            document.getElementById('visualizerToggle').checked = visualizer;
            document.getElementById('reducedMotionToggle').checked = reducedMotion;
            
            // Add event listeners
            document.getElementById('autoPlayToggle').addEventListener('change', (e) => {
                localStorage.setItem('autoPlayVideos', e.target.checked);
                showToast(e.target.checked ? '▶️ Auto-play enabled' : '⏸️ Auto-play disabled');
            });
            
            document.getElementById('visualizerToggle').addEventListener('change', (e) => {
                localStorage.setItem('enableVisualizer', e.target.checked);
                showToast(e.target.checked ? '🎵 Visualizer enabled by default' : '🔇 Visualizer disabled by default');
            });
            
            document.getElementById('reducedMotionToggle').addEventListener('change', (e) => {
                localStorage.setItem('reducedMotion', e.target.checked);
                document.documentElement.classList.toggle('reduced-motion', e.target.checked);
                showToast(e.target.checked ? '🚫 Reduced motion enabled' : '✨ Full animations enabled');
            });
        }
        
        // Initialize theme on page load
        (async function initializeTheme() {
            // Check memory on startup
            checkMemoryAndCompact();
            
            // Load theme index
            await loadThemeIndex();
            
            // Apply saved theme or default
            const savedTheme = localStorage.getItem('selectedTheme') || 'default';
            if (savedTheme !== 'default') {
                await loadThemeFile(savedTheme);
            }
            
            // Apply reduced motion if set
            if (localStorage.getItem('reducedMotion') === 'true') {
                document.documentElement.classList.add('reduced-motion');
            }
        })();
        
    </script>
</body>
</html>